(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ha(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const It={},vr=[],Me=()=>{},Sh=()=>!1,so=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),za=e=>e.startsWith("onUpdate:"),ce=Object.assign,Ka=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},tm=Object.prototype.hasOwnProperty,_t=(e,t)=>tm.call(e,t),nt=Array.isArray,Er=e=>Us(e)==="[object Map]",Rh=e=>Us(e)==="[object Set]",Nu=e=>Us(e)==="[object Date]",at=e=>typeof e=="function",Ut=e=>typeof e=="string",Pe=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",Ch=e=>(bt(e)||at(e))&&at(e.then)&&at(e.catch),Ph=Object.prototype.toString,Us=e=>Ph.call(e),em=e=>Us(e).slice(8,-1),Vh=e=>Us(e)==="[object Object]",Wa=e=>Ut(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fs=Ha(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),io=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},nm=/-\w/g,Tn=io(e=>e.replace(nm,t=>t.slice(1).toUpperCase())),rm=/\B([A-Z])/g,Xn=io(e=>e.replace(rm,"-$1").toLowerCase()),Dh=io(e=>e.charAt(0).toUpperCase()+e.slice(1)),zo=io(e=>e?`on${Dh(e)}`:""),mn=(e,t)=>!Object.is(e,t),Ei=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},xh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Ga=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ou;const oo=()=>Ou||(Ou=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kr(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ut(r)?am(r):kr(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ut(e)||bt(e))return e}const sm=/;(?![^(]*\))/g,im=/:([^]+)/,om=/\/\*[^]*?\*\//g;function am(e){const t={};return e.replace(om,"").split(sm).forEach(n=>{if(n){const r=n.split(im);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Qa(e){let t="";if(Ut(e))t=e;else if(nt(e))for(let n=0;n<e.length;n++){const r=Qa(e[n]);r&&(t+=r+" ")}else if(bt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const lm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",um=Ha(lm);function Nh(e){return!!e||e===""}function cm(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Di(e[r],t[r]);return n}function Di(e,t){if(e===t)return!0;let n=Nu(e),r=Nu(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Pe(e),r=Pe(t),n||r)return e===t;if(n=nt(e),r=nt(t),n||r)return n&&r?cm(e,t):!1;if(n=bt(e),r=bt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Di(e[a],t[a]))return!1}}return String(e)===String(t)}const Oh=e=>!!(e&&e.__v_isRef===!0),hr=e=>Ut(e)?e:e==null?"":nt(e)||bt(e)&&(e.toString===Ph||!at(e.toString))?Oh(e)?hr(e.value):JSON.stringify(e,kh,2):String(e),kh=(e,t)=>Oh(t)?kh(e,t.value):Er(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Ko(r,i)+" =>"]=s,n),{})}:Rh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ko(n))}:Pe(t)?Ko(t):bt(t)&&!nt(t)&&!Vh(t)?String(t):t,Ko=(e,t="")=>{var n;return Pe(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ie;class Mh{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ie,!t&&ie&&(this.index=(ie.scopes||(ie.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ie;try{return ie=this,t()}finally{ie=n}}}on(){++this._on===1&&(this.prevScope=ie,ie=this)}off(){this._on>0&&--this._on===0&&(ie=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Fh(e){return new Mh(e)}function Lh(){return ie}function hm(e,t=!1){ie&&ie.cleanups.push(e)}let wt;const Wo=new WeakSet;class Uh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ie&&ie.active&&ie.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wo.has(this)&&(Wo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ku(this),$h(this);const t=wt,n=Ce;wt=this,Ce=!0;try{return this.fn()}finally{qh(this),wt=t,Ce=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ya(t);this.deps=this.depsTail=void 0,ku(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ha(this)&&this.run()}get dirty(){return ha(this)}}let Bh=0,ds,ps;function jh(e,t=!1){if(e.flags|=8,t){e.next=ps,ps=e;return}e.next=ds,ds=e}function Ja(){Bh++}function Xa(){if(--Bh>0)return;if(ps){let t=ps;for(ps=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ds;){let t=ds;for(ds=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function $h(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function qh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ya(r),fm(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function ha(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Hh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Hh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ss)||(e.globalVersion=Ss,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ha(e))))return;e.flags|=2;const t=e.dep,n=wt,r=Ce;wt=e,Ce=!0;try{$h(e);const s=e.fn(e._value);(t.version===0||mn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{wt=n,Ce=r,qh(e),e.flags&=-3}}function Ya(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ya(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function fm(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ce=!0;const zh=[];function Ze(){zh.push(Ce),Ce=!1}function tn(){const e=zh.pop();Ce=e===void 0?!0:e}function ku(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=wt;wt=void 0;try{t()}finally{wt=n}}}let Ss=0;class dm{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Za{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!wt||!Ce||wt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==wt)n=this.activeLink=new dm(wt,this),wt.deps?(n.prevDep=wt.depsTail,wt.depsTail.nextDep=n,wt.depsTail=n):wt.deps=wt.depsTail=n,Kh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=wt.depsTail,n.nextDep=void 0,wt.depsTail.nextDep=n,wt.depsTail=n,wt.deps===n&&(wt.deps=r)}return n}trigger(t){this.version++,Ss++,this.notify(t)}notify(t){Ja();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xa()}}}function Kh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Kh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const xi=new WeakMap,Hn=Symbol(""),fa=Symbol(""),Rs=Symbol("");function ae(e,t,n){if(Ce&&wt){let r=xi.get(e);r||xi.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Za),s.map=r,s.key=n),s.track()}}function Je(e,t,n,r,s,i){const a=xi.get(e);if(!a){Ss++;return}const l=c=>{c&&c.trigger()};if(Ja(),t==="clear")a.forEach(l);else{const c=nt(e),f=c&&Wa(n);if(c&&n==="length"){const d=Number(r);a.forEach((m,v)=>{(v==="length"||v===Rs||!Pe(v)&&v>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Rs)),t){case"add":c?f&&l(a.get("length")):(l(a.get(Hn)),Er(e)&&l(a.get(fa)));break;case"delete":c||(l(a.get(Hn)),Er(e)&&l(a.get(fa)));break;case"set":Er(e)&&l(a.get(Hn));break}}Xa()}function pm(e,t){const n=xi.get(e);return n&&n.get(t)}function lr(e){const t=gt(e);return t===e?t:(ae(t,"iterate",Rs),Ae(e)?t:t.map(Yt))}function ao(e){return ae(e=gt(e),"iterate",Rs),e}const mm={__proto__:null,[Symbol.iterator](){return Go(this,Symbol.iterator,Yt)},concat(...e){return lr(this).concat(...e.map(t=>nt(t)?lr(t):t))},entries(){return Go(this,"entries",e=>(e[1]=Yt(e[1]),e))},every(e,t){return Ge(this,"every",e,t,void 0,arguments)},filter(e,t){return Ge(this,"filter",e,t,n=>n.map(Yt),arguments)},find(e,t){return Ge(this,"find",e,t,Yt,arguments)},findIndex(e,t){return Ge(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ge(this,"findLast",e,t,Yt,arguments)},findLastIndex(e,t){return Ge(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ge(this,"forEach",e,t,void 0,arguments)},includes(...e){return Qo(this,"includes",e)},indexOf(...e){return Qo(this,"indexOf",e)},join(e){return lr(this).join(e)},lastIndexOf(...e){return Qo(this,"lastIndexOf",e)},map(e,t){return Ge(this,"map",e,t,void 0,arguments)},pop(){return ns(this,"pop")},push(...e){return ns(this,"push",e)},reduce(e,...t){return Mu(this,"reduce",e,t)},reduceRight(e,...t){return Mu(this,"reduceRight",e,t)},shift(){return ns(this,"shift")},some(e,t){return Ge(this,"some",e,t,void 0,arguments)},splice(...e){return ns(this,"splice",e)},toReversed(){return lr(this).toReversed()},toSorted(e){return lr(this).toSorted(e)},toSpliced(...e){return lr(this).toSpliced(...e)},unshift(...e){return ns(this,"unshift",e)},values(){return Go(this,"values",Yt)}};function Go(e,t,n){const r=ao(e),s=r[t]();return r!==e&&!Ae(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const gm=Array.prototype;function Ge(e,t,n,r,s,i){const a=ao(e),l=a!==e&&!Ae(e),c=a[t];if(c!==gm[t]){const m=c.apply(e,i);return l?Yt(m):m}let f=n;a!==e&&(l?f=function(m,v){return n.call(this,Yt(m),v,e)}:n.length>2&&(f=function(m,v){return n.call(this,m,v,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function Mu(e,t,n,r){const s=ao(e);let i=n;return s!==e&&(Ae(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Yt(l),c,e)}),s[t](i,...r)}function Qo(e,t,n){const r=gt(e);ae(r,"iterate",Rs);const s=r[t](...n);return(s===-1||s===!1)&&nl(n[0])?(n[0]=gt(n[0]),r[t](...n)):s}function ns(e,t,n=[]){Ze(),Ja();const r=gt(e)[t].apply(e,n);return Xa(),tn(),r}const _m=Ha("__proto__,__v_isRef,__isVue"),Wh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pe));function ym(e){Pe(e)||(e=String(e));const t=gt(this);return ae(t,"has",e),t.hasOwnProperty(e)}class Gh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Cm:Yh:i?Xh:Jh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=nt(t);if(!s){let c;if(a&&(c=mm[n]))return c;if(n==="hasOwnProperty")return ym}const l=Reflect.get(t,n,Mt(t)?t:r);if((Pe(n)?Wh.has(n):_m(n))||(s||ae(t,"get",n),i))return l;if(Mt(l)){const c=a&&Wa(n)?l:l.value;return s&&bt(c)?pa(c):c}return bt(l)?s?pa(l):lo(l):l}}class Qh extends Gh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=In(i);if(!Ae(r)&&!In(r)&&(i=gt(i),r=gt(r)),!nt(t)&&Mt(i)&&!Mt(r))return c||(i.value=r),!0}const a=nt(t)&&Wa(n)?Number(n)<t.length:_t(t,n),l=Reflect.set(t,n,r,Mt(t)?t:s);return t===gt(s)&&(a?mn(r,i)&&Je(t,"set",n,r):Je(t,"add",n,r)),l}deleteProperty(t,n){const r=_t(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Je(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Pe(n)||!Wh.has(n))&&ae(t,"has",n),r}ownKeys(t){return ae(t,"iterate",nt(t)?"length":Hn),Reflect.ownKeys(t)}}class vm extends Gh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Em=new Qh,Tm=new vm,Im=new Qh(!0);const da=e=>e,hi=e=>Reflect.getPrototypeOf(e);function wm(e,t,n){return function(...r){const s=this.__v_raw,i=gt(s),a=Er(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?da:t?Ni:Yt;return!t&&ae(i,"iterate",c?fa:Hn),{next(){const{value:m,done:v}=f.next();return v?{value:m,done:v}:{value:l?[d(m[0]),d(m[1])]:d(m),done:v}},[Symbol.iterator](){return this}}}}function fi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Am(e,t){const n={get(s){const i=this.__v_raw,a=gt(i),l=gt(s);e||(mn(s,l)&&ae(a,"get",s),ae(a,"get",l));const{has:c}=hi(a),f=t?da:e?Ni:Yt;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&ae(gt(s),"iterate",Hn),s.size},has(s){const i=this.__v_raw,a=gt(i),l=gt(s);return e||(mn(s,l)&&ae(a,"has",s),ae(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=gt(l),f=t?da:e?Ni:Yt;return!e&&ae(c,"iterate",Hn),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return ce(n,e?{add:fi("add"),set:fi("set"),delete:fi("delete"),clear:fi("clear")}:{add(s){!t&&!Ae(s)&&!In(s)&&(s=gt(s));const i=gt(this);return hi(i).has.call(i,s)||(i.add(s),Je(i,"add",s,s)),this},set(s,i){!t&&!Ae(i)&&!In(i)&&(i=gt(i));const a=gt(this),{has:l,get:c}=hi(a);let f=l.call(a,s);f||(s=gt(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?mn(i,d)&&Je(a,"set",s,i):Je(a,"add",s,i),this},delete(s){const i=gt(this),{has:a,get:l}=hi(i);let c=a.call(i,s);c||(s=gt(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&Je(i,"delete",s,void 0),f},clear(){const s=gt(this),i=s.size!==0,a=s.clear();return i&&Je(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=wm(s,e,t)}),n}function tl(e,t){const n=Am(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(_t(n,s)&&s in r?n:r,s,i)}const bm={get:tl(!1,!1)},Sm={get:tl(!1,!0)},Rm={get:tl(!0,!1)};const Jh=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Cm=new WeakMap;function Pm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vm(e){return e.__v_skip||!Object.isExtensible(e)?0:Pm(em(e))}function lo(e){return In(e)?e:el(e,!1,Em,bm,Jh)}function Dm(e){return el(e,!1,Im,Sm,Xh)}function pa(e){return el(e,!0,Tm,Rm,Yh)}function el(e,t,n,r,s){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Vm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function gn(e){return In(e)?gn(e.__v_raw):!!(e&&e.__v_isReactive)}function In(e){return!!(e&&e.__v_isReadonly)}function Ae(e){return!!(e&&e.__v_isShallow)}function nl(e){return e?!!e.__v_raw:!1}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function rl(e){return!_t(e,"__v_skip")&&Object.isExtensible(e)&&xh(e,"__v_skip",!0),e}const Yt=e=>bt(e)?lo(e):e,Ni=e=>bt(e)?pa(e):e;function Mt(e){return e?e.__v_isRef===!0:!1}function Zh(e){return xm(e,!1)}function xm(e,t){return Mt(e)?e:new Nm(e,t)}class Nm{constructor(t,n){this.dep=new Za,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:gt(t),this._value=n?t:Yt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ae(t)||In(t);t=r?t:gt(t),mn(t,n)&&(this._rawValue=t,this._value=r?t:Yt(t),this.dep.trigger())}}function Tt(e){return Mt(e)?e.value:e}const Om={get:(e,t,n)=>t==="__v_raw"?e:Tt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Mt(s)&&!Mt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function tf(e){return gn(e)?e:new Proxy(e,Om)}function km(e){const t=nt(e)?new Array(e.length):{};for(const n in e)t[n]=Fm(e,n);return t}class Mm{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return pm(gt(this._object),this._key)}}function Fm(e,t,n){const r=e[t];return Mt(r)?r:new Mm(e,t,n)}class Lm{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Za(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ss-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&wt!==this)return jh(this,!0),!0}get value(){const t=this.dep.track();return Hh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Um(e,t,n=!1){let r,s;return at(e)?r=e:(r=e.get,s=e.set),new Lm(r,s,n)}const di={},Oi=new WeakMap;let Un;function Bm(e,t=!1,n=Un){if(n){let r=Oi.get(n);r||Oi.set(n,r=[]),r.push(e)}}function jm(e,t,n=It){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=z=>s?z:Ae(z)||s===!1||s===0?Xe(z,1):Xe(z);let d,m,v,b,V=!1,F=!1;if(Mt(e)?(m=()=>e.value,V=Ae(e)):gn(e)?(m=()=>f(e),V=!0):nt(e)?(F=!0,V=e.some(z=>gn(z)||Ae(z)),m=()=>e.map(z=>{if(Mt(z))return z.value;if(gn(z))return f(z);if(at(z))return c?c(z,2):z()})):at(e)?t?m=c?()=>c(e,2):e:m=()=>{if(v){Ze();try{v()}finally{tn()}}const z=Un;Un=d;try{return c?c(e,3,[b]):e(b)}finally{Un=z}}:m=Me,t&&s){const z=m,lt=s===!0?1/0:s;m=()=>Xe(z(),lt)}const L=Lh(),K=()=>{d.stop(),L&&L.active&&Ka(L.effects,d)};if(i&&t){const z=t;t=(...lt)=>{z(...lt),K()}}let W=F?new Array(e.length).fill(di):di;const G=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const lt=d.run();if(s||V||(F?lt.some((vt,I)=>mn(vt,W[I])):mn(lt,W))){v&&v();const vt=Un;Un=d;try{const I=[lt,W===di?void 0:F&&W[0]===di?[]:W,b];W=lt,c?c(t,3,I):t(...I)}finally{Un=vt}}}else d.run()};return l&&l(G),d=new Uh(m),d.scheduler=a?()=>a(G,!1):G,b=z=>Bm(z,!1,d),v=d.onStop=()=>{const z=Oi.get(d);if(z){if(c)c(z,4);else for(const lt of z)lt();Oi.delete(d)}},t?r?G(!0):W=d.run():a?a(G.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function Xe(e,t=1/0,n){if(t<=0||!bt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Mt(e))Xe(e.value,t,n);else if(nt(e))for(let r=0;r<e.length;r++)Xe(e[r],t,n);else if(Rh(e)||Er(e))e.forEach(r=>{Xe(r,t,n)});else if(Vh(e)){for(const r in e)Xe(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Xe(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Bs(e,t,n,r){try{return r?e(...r):e()}catch(s){uo(s,t,n)}}function je(e,t,n,r){if(at(e)){const s=Bs(e,t,n,r);return s&&Ch(s)&&s.catch(i=>{uo(i,t,n)}),s}if(nt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(je(e[i],t,n,r));return s}}function uo(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,c,f)===!1)return}l=l.parent}if(i){Ze(),Bs(i,null,10,[e,c,f]),tn();return}}$m(e,n,s,r,a)}function $m(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const pe=[];let Ne=-1;const Tr=[];let hn=null,fr=0;const ef=Promise.resolve();let ki=null;function nf(e){const t=ki||ef;return e?t.then(this?e.bind(this):e):t}function qm(e){let t=Ne+1,n=pe.length;for(;t<n;){const r=t+n>>>1,s=pe[r],i=Cs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function sl(e){if(!(e.flags&1)){const t=Cs(e),n=pe[pe.length-1];!n||!(e.flags&2)&&t>=Cs(n)?pe.push(e):pe.splice(qm(t),0,e),e.flags|=1,rf()}}function rf(){ki||(ki=ef.then(of))}function Hm(e){nt(e)?Tr.push(...e):hn&&e.id===-1?hn.splice(fr+1,0,e):e.flags&1||(Tr.push(e),e.flags|=1),rf()}function Fu(e,t,n=Ne+1){for(;n<pe.length;n++){const r=pe[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;pe.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function sf(e){if(Tr.length){const t=[...new Set(Tr)].sort((n,r)=>Cs(n)-Cs(r));if(Tr.length=0,hn){hn.push(...t);return}for(hn=t,fr=0;fr<hn.length;fr++){const n=hn[fr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hn=null,fr=0}}const Cs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function of(e){try{for(Ne=0;Ne<pe.length;Ne++){const t=pe[Ne];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Bs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ne<pe.length;Ne++){const t=pe[Ne];t&&(t.flags&=-2)}Ne=-1,pe.length=0,sf(),ki=null,(pe.length||Tr.length)&&of()}}let ue=null,af=null;function Mi(e){const t=ue;return ue=e,af=e&&e.type.__scopeId||null,t}function Bn(e,t=ue,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Wu(-1);const i=Mi(t);let a;try{a=e(...s)}finally{Mi(i),r._d&&Wu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ur(e,t){if(ue===null)return e;const n=po(ue),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=It]=t[s];i&&(at(i)&&(i={mounted:i,updated:i}),i.deep&&Xe(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Fn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(Ze(),je(c,n,8,[e.el,l,e,t]),tn())}}const zm=Symbol("_vte"),Km=e=>e.__isTeleport,Wm=Symbol("_leaveCb");function il(e,t){e.shapeFlag&6&&e.component?(e.transition=t,il(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function js(e,t){return at(e)?ce({name:e.name},t,{setup:e}):e}function lf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Fi=new WeakMap;function ms(e,t,n,r,s=!1){if(nt(e)){e.forEach((V,F)=>ms(V,t&&(nt(t)?t[F]:t),n,r,s));return}if(Ir(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ms(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?po(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,v=gt(m),b=m===It?Sh:V=>_t(v,V);if(f!=null&&f!==c){if(Lu(t),Ut(f))d[f]=null,b(f)&&(m[f]=null);else if(Mt(f)){f.value=null;const V=t;V.k&&(d[V.k]=null)}}if(at(c))Bs(c,l,12,[a,d]);else{const V=Ut(c),F=Mt(c);if(V||F){const L=()=>{if(e.f){const K=V?b(c)?m[c]:d[c]:c.value;if(s)nt(K)&&Ka(K,i);else if(nt(K))K.includes(i)||K.push(i);else if(V)d[c]=[i],b(c)&&(m[c]=d[c]);else{const W=[i];c.value=W,e.k&&(d[e.k]=W)}}else V?(d[c]=a,b(c)&&(m[c]=a)):F&&(c.value=a,e.k&&(d[e.k]=a))};if(a){const K=()=>{L(),Fi.delete(e)};K.id=-1,Fi.set(e,K),ye(K,n)}else Lu(e),L()}}}function Lu(e){const t=Fi.get(e);t&&(t.flags|=8,Fi.delete(e))}oo().requestIdleCallback;oo().cancelIdleCallback;const Ir=e=>!!e.type.__asyncLoader,uf=e=>e.type.__isKeepAlive;function Gm(e,t){cf(e,"a",t)}function Qm(e,t){cf(e,"da",t)}function cf(e,t,n=me){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(co(t,r,n),n){let s=n.parent;for(;s&&s.parent;)uf(s.parent.vnode)&&Jm(r,t,n,s),s=s.parent}}function Jm(e,t,n,r){const s=co(t,e,r,!0);hf(()=>{Ka(r[t],s)},n)}function co(e,t,n=me,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Ze();const l=$s(n),c=je(t,n,e,a);return l(),tn(),c});return r?s.unshift(i):s.push(i),i}}const sn=e=>(t,n=me)=>{(!Vs||e==="sp")&&co(e,(...r)=>t(...r),n)},Xm=sn("bm"),Ym=sn("m"),Zm=sn("bu"),tg=sn("u"),eg=sn("bum"),hf=sn("um"),ng=sn("sp"),rg=sn("rtg"),sg=sn("rtc");function ig(e,t=me){co("ec",e,t)}const og=Symbol.for("v-ndc");function dn(e,t,n,r){let s;const i=n,a=nt(e);if(a||Ut(e)){const l=a&&gn(e);let c=!1,f=!1;l&&(c=!Ae(e),f=In(e),e=ao(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(c?f?Ni(Yt(e[d])):Yt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}function ag(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(nt(r))for(let s=0;s<r.length;s++)e[r[s].name]=r[s].fn;else r&&(e[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return e}function Ti(e,t,n={},r,s){if(ue.ce||ue.parent&&Ir(ue.parent)&&ue.parent.ce){const f=Object.keys(n).length>0;return t!=="default"&&(n.name=t),At(),vs(kt,null,[Xt("slot",n,r)],f?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),At();const a=i&&ff(i(n)),l=n.key||a&&a.key,c=vs(kt,{key:(l&&!Pe(l)?l:`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return!s&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function ff(e){return e.some(t=>ll(t)?!(t.type===Gn||t.type===kt&&!ff(t.children)):!0)?e:null}const ma=e=>e?Nf(e)?po(e):ma(e.parent):null,gs=ce(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ma(e.parent),$root:e=>ma(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>pf(e),$forceUpdate:e=>e.f||(e.f=()=>{sl(e.update)}),$nextTick:e=>e.n||(e.n=nf.bind(e.proxy)),$watch:e=>Vg.bind(e)}),Jo=(e,t)=>e!==It&&!e.__isScriptSetup&&_t(e,t),lg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const b=a[t];if(b!==void 0)switch(b){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Jo(r,t))return a[t]=1,r[t];if(s!==It&&_t(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&_t(f,t))return a[t]=3,i[t];if(n!==It&&_t(n,t))return a[t]=4,n[t];ga&&(a[t]=0)}}const d=gs[t];let m,v;if(d)return t==="$attrs"&&ae(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==It&&_t(n,t))return a[t]=4,n[t];if(v=c.config.globalProperties,_t(v,t))return v[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Jo(s,t)?(s[t]=n,!0):r!==It&&_t(r,t)?(r[t]=n,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let c,f;return!!(n[l]||e!==It&&l[0]!=="$"&&_t(e,l)||Jo(t,l)||(c=i[0])&&_t(c,l)||_t(r,l)||_t(gs,l)||_t(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:_t(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Uu(e){return nt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ga=!0;function ug(e){const t=pf(e),n=e.proxy,r=e.ctx;ga=!1,t.beforeCreate&&Bu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:m,mounted:v,beforeUpdate:b,updated:V,activated:F,deactivated:L,beforeDestroy:K,beforeUnmount:W,destroyed:G,unmounted:z,render:lt,renderTracked:vt,renderTriggered:I,errorCaptured:g,serverPrefetch:_,expose:T,inheritAttrs:w,components:S,directives:E,filters:he}=t;if(f&&cg(f,r,null),a)for(const it in a){const pt=a[it];at(pt)&&(r[it]=pt.bind(n))}if(s){const it=s.call(n,n);bt(it)&&(e.data=lo(it))}if(ga=!0,i)for(const it in i){const pt=i[it],be=at(pt)?pt.bind(n,n):at(pt.get)?pt.get.bind(n,n):Me,Vn=!at(pt)&&at(pt.set)?pt.set.bind(n):Me,He=yr({get:be,set:Vn});Object.defineProperty(r,it,{enumerable:!0,configurable:!0,get:()=>He.value,set:Bt=>He.value=Bt})}if(l)for(const it in l)df(l[it],r,n,it);if(c){const it=at(c)?c.call(n):c;Reflect.ownKeys(it).forEach(pt=>{gg(pt,it[pt])})}d&&Bu(d,e,"c");function Vt(it,pt){nt(pt)?pt.forEach(be=>it(be.bind(n))):pt&&it(pt.bind(n))}if(Vt(Xm,m),Vt(Ym,v),Vt(Zm,b),Vt(tg,V),Vt(Gm,F),Vt(Qm,L),Vt(ig,g),Vt(sg,vt),Vt(rg,I),Vt(eg,W),Vt(hf,z),Vt(ng,_),nt(T))if(T.length){const it=e.exposed||(e.exposed={});T.forEach(pt=>{Object.defineProperty(it,pt,{get:()=>n[pt],set:be=>n[pt]=be,enumerable:!0})})}else e.exposed||(e.exposed={});lt&&e.render===Me&&(e.render=lt),w!=null&&(e.inheritAttrs=w),S&&(e.components=S),E&&(e.directives=E),_&&lf(e)}function cg(e,t,n=Me){nt(e)&&(e=_a(e));for(const r in e){const s=e[r];let i;bt(s)?"default"in s?i=_s(s.from||r,s.default,!0):i=_s(s.from||r):i=_s(s),Mt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Bu(e,t,n){je(nt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function df(e,t,n,r){let s=r.includes(".")?Rf(n,r):()=>n[r];if(Ut(e)){const i=t[e];at(i)&&Ii(s,i)}else if(at(e))Ii(s,e.bind(n));else if(bt(e))if(nt(e))e.forEach(i=>df(i,t,n,r));else{const i=at(e.handler)?e.handler.bind(n):t[e.handler];at(i)&&Ii(s,i,e)}}function pf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>Li(c,f,a,!0)),Li(c,t,a)),bt(t)&&i.set(t,c),c}function Li(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Li(e,i,n,!0),s&&s.forEach(a=>Li(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=hg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const hg={data:ju,props:$u,emits:$u,methods:as,computed:as,beforeCreate:de,created:de,beforeMount:de,mounted:de,beforeUpdate:de,updated:de,beforeDestroy:de,beforeUnmount:de,destroyed:de,unmounted:de,activated:de,deactivated:de,errorCaptured:de,serverPrefetch:de,components:as,directives:as,watch:dg,provide:ju,inject:fg};function ju(e,t){return t?e?function(){return ce(at(e)?e.call(this,this):e,at(t)?t.call(this,this):t)}:t:e}function fg(e,t){return as(_a(e),_a(t))}function _a(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function de(e,t){return e?[...new Set([].concat(e,t))]:t}function as(e,t){return e?ce(Object.create(null),e,t):t}function $u(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:ce(Object.create(null),Uu(e),Uu(t??{})):t}function dg(e,t){if(!e)return t;if(!t)return e;const n=ce(Object.create(null),e);for(const r in t)n[r]=de(e[r],t[r]);return n}function mf(){return{app:null,config:{isNativeTag:Sh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pg=0;function mg(e,t){return function(r,s=null){at(r)||(r=ce({},r)),s!=null&&!bt(s)&&(s=null);const i=mf(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:pg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Xg,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&at(d.install)?(a.add(d),d.install(f,...m)):at(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,v){if(!c){const b=f._ceVNode||Xt(r,s);return b.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),e(b,d,v),c=!0,f._container=d,d.__vue_app__=f,po(b.component)}},onUnmount(d){l.push(d)},unmount(){c&&(je(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=zn;zn=f;try{return d()}finally{zn=m}}};return f}}let zn=null;function gg(e,t){if(me){let n=me.provides;const r=me.parent&&me.parent.provides;r===n&&(n=me.provides=Object.create(r)),n[e]=t}}function _s(e,t,n=!1){const r=xf();if(r||zn){let s=zn?zn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&at(t)?t.call(r&&r.proxy):t}}function _g(){return!!(xf()||zn)}const gf={},_f=()=>Object.create(gf),yf=e=>Object.getPrototypeOf(e)===gf;function yg(e,t,n,r=!1){const s={},i=_f();e.propsDefaults=Object.create(null),vf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Dm(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function vg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=gt(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let v=d[m];if(ho(e.emitsOptions,v))continue;const b=t[v];if(c)if(_t(i,v))b!==i[v]&&(i[v]=b,f=!0);else{const V=Tn(v);s[V]=ya(c,l,V,b,e,!1)}else b!==i[v]&&(i[v]=b,f=!0)}}}else{vf(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!_t(t,m)&&((d=Xn(m))===m||!_t(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=ya(c,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!_t(t,m))&&(delete i[m],f=!0)}f&&Je(e.attrs,"set","")}function vf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(fs(c))continue;const f=t[c];let d;s&&_t(s,d=Tn(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:ho(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=gt(n),f=l||It;for(let d=0;d<i.length;d++){const m=i[d];n[m]=ya(s,c,m,f[m],e,!_t(f,m))}}return a}function ya(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=_t(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&at(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=$s(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Xn(n))&&(r=!0))}return r}const Eg=new WeakMap;function Ef(e,t,n=!1){const r=n?Eg:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!at(e)){const d=m=>{c=!0;const[v,b]=Ef(m,t,!0);ce(a,v),b&&l.push(...b)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return bt(e)&&r.set(e,vr),vr;if(nt(i))for(let d=0;d<i.length;d++){const m=Tn(i[d]);qu(m)&&(a[m]=It)}else if(i)for(const d in i){const m=Tn(d);if(qu(m)){const v=i[d],b=a[m]=nt(v)||at(v)?{type:v}:ce({},v),V=b.type;let F=!1,L=!0;if(nt(V))for(let K=0;K<V.length;++K){const W=V[K],G=at(W)&&W.name;if(G==="Boolean"){F=!0;break}else G==="String"&&(L=!1)}else F=at(V)&&V.name==="Boolean";b[0]=F,b[1]=L,(F||_t(b,"default"))&&l.push(m)}}const f=[a,l];return bt(e)&&r.set(e,f),f}function qu(e){return e[0]!=="$"&&!fs(e)}const ol=e=>e==="_"||e==="_ctx"||e==="$stable",al=e=>nt(e)?e.map(ke):[ke(e)],Tg=(e,t,n)=>{if(t._n)return t;const r=Bn((...s)=>al(t(...s)),n);return r._c=!1,r},Tf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(ol(s))continue;const i=e[s];if(at(i))t[s]=Tg(s,i,r);else if(i!=null){const a=al(i);t[s]=()=>a}}},If=(e,t)=>{const n=al(t);e.slots.default=()=>n},wf=(e,t,n)=>{for(const r in t)(n||!ol(r))&&(e[r]=t[r])},Ig=(e,t,n)=>{const r=e.slots=_f();if(e.vnode.shapeFlag&32){const s=t._;s?(wf(r,t,n),n&&xh(r,"_",s,!0)):Tf(t,r)}else t&&If(e,t)},wg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=It;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:wf(s,t,n):(i=!t.$stable,Tf(t,s)),a=t}else t&&(If(e,t),a={default:1});if(i)for(const l in s)!ol(l)&&a[l]==null&&delete s[l]},ye=Lg;function Ag(e){return bg(e)}function bg(e,t){const n=oo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:m,nextSibling:v,setScopeId:b=Me,insertStaticContent:V}=e,F=(y,A,P,M=null,x=null,O=null,$=void 0,B=null,U=!!A.dynamicChildren)=>{if(y===A)return;y&&!rs(y,A)&&(M=ze(y),Bt(y,x,O,!0),y=null),A.patchFlag===-2&&(U=!1,A.dynamicChildren=null);const{type:k,ref:Y,shapeFlag:q}=A;switch(k){case fo:L(y,A,P,M);break;case Gn:K(y,A,P,M);break;case Yo:y==null&&W(A,P,M,$);break;case kt:S(y,A,P,M,x,O,$,B,U);break;default:q&1?lt(y,A,P,M,x,O,$,B,U):q&6?E(y,A,P,M,x,O,$,B,U):(q&64||q&128)&&k.process(y,A,P,M,x,O,$,B,U,De)}Y!=null&&x?ms(Y,y&&y.ref,O,A||y,!A):Y==null&&y&&y.ref!=null&&ms(y.ref,null,O,y,!0)},L=(y,A,P,M)=>{if(y==null)r(A.el=l(A.children),P,M);else{const x=A.el=y.el;A.children!==y.children&&f(x,A.children)}},K=(y,A,P,M)=>{y==null?r(A.el=c(A.children||""),P,M):A.el=y.el},W=(y,A,P,M)=>{[y.el,y.anchor]=V(y.children,A,P,M,y.el,y.anchor)},G=({el:y,anchor:A},P,M)=>{let x;for(;y&&y!==A;)x=v(y),r(y,P,M),y=x;r(A,P,M)},z=({el:y,anchor:A})=>{let P;for(;y&&y!==A;)P=v(y),s(y),y=P;s(A)},lt=(y,A,P,M,x,O,$,B,U)=>{if(A.type==="svg"?$="svg":A.type==="math"&&($="mathml"),y==null)vt(A,P,M,x,O,$,B,U);else{const k=y.el&&y.el._isVueCE?y.el:null;try{k&&k._beginPatch(),_(y,A,x,O,$,B,U)}finally{k&&k._endPatch()}}},vt=(y,A,P,M,x,O,$,B)=>{let U,k;const{props:Y,shapeFlag:q,transition:J,dirs:et}=y;if(U=y.el=a(y.type,O,Y&&Y.is,Y),q&8?d(U,y.children):q&16&&g(y.children,U,null,M,x,Xo(y,O),$,B),et&&Fn(y,null,M,"created"),I(U,y,y.scopeId,$,M),Y){for(const ot in Y)ot!=="value"&&!fs(ot)&&i(U,ot,null,Y[ot],O,M);"value"in Y&&i(U,"value",null,Y.value,O),(k=Y.onVnodeBeforeMount)&&xe(k,M,y)}et&&Fn(y,null,M,"beforeMount");const Z=Sg(x,J);Z&&J.beforeEnter(U),r(U,A,P),((k=Y&&Y.onVnodeMounted)||Z||et)&&ye(()=>{k&&xe(k,M,y),Z&&J.enter(U),et&&Fn(y,null,M,"mounted")},x)},I=(y,A,P,M,x)=>{if(P&&b(y,P),M)for(let O=0;O<M.length;O++)b(y,M[O]);if(x){let O=x.subTree;if(A===O||Pf(O.type)&&(O.ssContent===A||O.ssFallback===A)){const $=x.vnode;I(y,$,$.scopeId,$.slotScopeIds,x.parent)}}},g=(y,A,P,M,x,O,$,B,U=0)=>{for(let k=U;k<y.length;k++){const Y=y[k]=B?fn(y[k]):ke(y[k]);F(null,Y,A,P,M,x,O,$,B)}},_=(y,A,P,M,x,O,$)=>{const B=A.el=y.el;let{patchFlag:U,dynamicChildren:k,dirs:Y}=A;U|=y.patchFlag&16;const q=y.props||It,J=A.props||It;let et;if(P&&Ln(P,!1),(et=J.onVnodeBeforeUpdate)&&xe(et,P,A,y),Y&&Fn(A,y,P,"beforeUpdate"),P&&Ln(P,!0),(q.innerHTML&&J.innerHTML==null||q.textContent&&J.textContent==null)&&d(B,""),k?T(y.dynamicChildren,k,B,P,M,Xo(A,x),O):$||pt(y,A,B,null,P,M,Xo(A,x),O,!1),U>0){if(U&16)w(B,q,J,P,x);else if(U&2&&q.class!==J.class&&i(B,"class",null,J.class,x),U&4&&i(B,"style",q.style,J.style,x),U&8){const Z=A.dynamicProps;for(let ot=0;ot<Z.length;ot++){const ht=Z[ot],Kt=q[ht],Wt=J[ht];(Wt!==Kt||ht==="value")&&i(B,ht,Kt,Wt,x,P)}}U&1&&y.children!==A.children&&d(B,A.children)}else!$&&k==null&&w(B,q,J,P,x);((et=J.onVnodeUpdated)||Y)&&ye(()=>{et&&xe(et,P,A,y),Y&&Fn(A,y,P,"updated")},M)},T=(y,A,P,M,x,O,$)=>{for(let B=0;B<A.length;B++){const U=y[B],k=A[B],Y=U.el&&(U.type===kt||!rs(U,k)||U.shapeFlag&198)?m(U.el):P;F(U,k,Y,null,M,x,O,$,!0)}},w=(y,A,P,M,x)=>{if(A!==P){if(A!==It)for(const O in A)!fs(O)&&!(O in P)&&i(y,O,A[O],null,x,M);for(const O in P){if(fs(O))continue;const $=P[O],B=A[O];$!==B&&O!=="value"&&i(y,O,B,$,x,M)}"value"in P&&i(y,"value",A.value,P.value,x)}},S=(y,A,P,M,x,O,$,B,U)=>{const k=A.el=y?y.el:l(""),Y=A.anchor=y?y.anchor:l("");let{patchFlag:q,dynamicChildren:J,slotScopeIds:et}=A;et&&(B=B?B.concat(et):et),y==null?(r(k,P,M),r(Y,P,M),g(A.children||[],P,Y,x,O,$,B,U)):q>0&&q&64&&J&&y.dynamicChildren?(T(y.dynamicChildren,J,P,x,O,$,B),(A.key!=null||x&&A===x.subTree)&&Af(y,A,!0)):pt(y,A,P,Y,x,O,$,B,U)},E=(y,A,P,M,x,O,$,B,U)=>{A.slotScopeIds=B,y==null?A.shapeFlag&512?x.ctx.activate(A,P,M,$,U):he(A,P,M,x,O,$,U):Ve(y,A,U)},he=(y,A,P,M,x,O,$)=>{const B=y.component=zg(y,M,x);if(uf(y)&&(B.ctx.renderer=De),Kg(B,!1,$),B.asyncDep){if(x&&x.registerDep(B,Vt,$),!y.el){const U=B.subTree=Xt(Gn);K(null,U,A,P),y.placeholder=U.el}}else Vt(B,y,A,P,x,O,$)},Ve=(y,A,P)=>{const M=A.component=y.component;if(Mg(y,A,P))if(M.asyncDep&&!M.asyncResolved){it(M,A,P);return}else M.next=A,M.update();else A.el=y.el,M.vnode=A},Vt=(y,A,P,M,x,O,$)=>{const B=()=>{if(y.isMounted){let{next:q,bu:J,u:et,parent:Z,vnode:ot}=y;{const ee=bf(y);if(ee){q&&(q.el=ot.el,it(y,q,$)),ee.asyncDep.then(()=>{y.isUnmounted||B()});return}}let ht=q,Kt;Ln(y,!1),q?(q.el=ot.el,it(y,q,$)):q=ot,J&&Ei(J),(Kt=q.props&&q.props.onVnodeBeforeUpdate)&&xe(Kt,Z,q,ot),Ln(y,!0);const Wt=zu(y),Ee=y.subTree;y.subTree=Wt,F(Ee,Wt,m(Ee.el),ze(Ee),y,x,O),q.el=Wt.el,ht===null&&Fg(y,Wt.el),et&&ye(et,x),(Kt=q.props&&q.props.onVnodeUpdated)&&ye(()=>xe(Kt,Z,q,ot),x)}else{let q;const{el:J,props:et}=A,{bm:Z,m:ot,parent:ht,root:Kt,type:Wt}=y,Ee=Ir(A);Ln(y,!1),Z&&Ei(Z),!Ee&&(q=et&&et.onVnodeBeforeMount)&&xe(q,ht,A),Ln(y,!0);{Kt.ce&&Kt.ce._def.shadowRoot!==!1&&Kt.ce._injectChildStyle(Wt);const ee=y.subTree=zu(y);F(null,ee,P,M,y,x,O),A.el=ee.el}if(ot&&ye(ot,x),!Ee&&(q=et&&et.onVnodeMounted)){const ee=A;ye(()=>xe(q,ht,ee),x)}(A.shapeFlag&256||ht&&Ir(ht.vnode)&&ht.vnode.shapeFlag&256)&&y.a&&ye(y.a,x),y.isMounted=!0,A=P=M=null}};y.scope.on();const U=y.effect=new Uh(B);y.scope.off();const k=y.update=U.run.bind(U),Y=y.job=U.runIfDirty.bind(U);Y.i=y,Y.id=y.uid,U.scheduler=()=>sl(Y),Ln(y,!0),k()},it=(y,A,P)=>{A.component=y;const M=y.vnode.props;y.vnode=A,y.next=null,vg(y,A.props,M,P),wg(y,A.children,P),Ze(),Fu(y),tn()},pt=(y,A,P,M,x,O,$,B,U=!1)=>{const k=y&&y.children,Y=y?y.shapeFlag:0,q=A.children,{patchFlag:J,shapeFlag:et}=A;if(J>0){if(J&128){Vn(k,q,P,M,x,O,$,B,U);return}else if(J&256){be(k,q,P,M,x,O,$,B,U);return}}et&8?(Y&16&&xn(k,x,O),q!==k&&d(P,q)):Y&16?et&16?Vn(k,q,P,M,x,O,$,B,U):xn(k,x,O,!0):(Y&8&&d(P,""),et&16&&g(q,P,M,x,O,$,B,U))},be=(y,A,P,M,x,O,$,B,U)=>{y=y||vr,A=A||vr;const k=y.length,Y=A.length,q=Math.min(k,Y);let J;for(J=0;J<q;J++){const et=A[J]=U?fn(A[J]):ke(A[J]);F(y[J],et,P,null,x,O,$,B,U)}k>Y?xn(y,x,O,!0,!1,q):g(A,P,M,x,O,$,B,U,q)},Vn=(y,A,P,M,x,O,$,B,U)=>{let k=0;const Y=A.length;let q=y.length-1,J=Y-1;for(;k<=q&&k<=J;){const et=y[k],Z=A[k]=U?fn(A[k]):ke(A[k]);if(rs(et,Z))F(et,Z,P,null,x,O,$,B,U);else break;k++}for(;k<=q&&k<=J;){const et=y[q],Z=A[J]=U?fn(A[J]):ke(A[J]);if(rs(et,Z))F(et,Z,P,null,x,O,$,B,U);else break;q--,J--}if(k>q){if(k<=J){const et=J+1,Z=et<Y?A[et].el:M;for(;k<=J;)F(null,A[k]=U?fn(A[k]):ke(A[k]),P,Z,x,O,$,B,U),k++}}else if(k>J)for(;k<=q;)Bt(y[k],x,O,!0),k++;else{const et=k,Z=k,ot=new Map;for(k=Z;k<=J;k++){const Gt=A[k]=U?fn(A[k]):ke(A[k]);Gt.key!=null&&ot.set(Gt.key,k)}let ht,Kt=0;const Wt=J-Z+1;let Ee=!1,ee=0;const on=new Array(Wt);for(k=0;k<Wt;k++)on[k]=0;for(k=et;k<=q;k++){const Gt=y[k];if(Kt>=Wt){Bt(Gt,x,O,!0);continue}let Te;if(Gt.key!=null)Te=ot.get(Gt.key);else for(ht=Z;ht<=J;ht++)if(on[ht-Z]===0&&rs(Gt,A[ht])){Te=ht;break}Te===void 0?Bt(Gt,x,O,!0):(on[Te-Z]=k+1,Te>=ee?ee=Te:Ee=!0,F(Gt,A[Te],P,null,x,O,$,B,U),Kt++)}const qr=Ee?Rg(on):vr;for(ht=qr.length-1,k=Wt-1;k>=0;k--){const Gt=Z+k,Te=A[Gt],Qs=A[Gt+1],rr=Gt+1<Y?Qs.el||Qs.placeholder:M;on[k]===0?F(null,Te,P,rr,x,O,$,B,U):Ee&&(ht<0||k!==qr[ht]?He(Te,P,rr,2):ht--)}}},He=(y,A,P,M,x=null)=>{const{el:O,type:$,transition:B,children:U,shapeFlag:k}=y;if(k&6){He(y.component.subTree,A,P,M);return}if(k&128){y.suspense.move(A,P,M);return}if(k&64){$.move(y,A,P,De);return}if($===kt){r(O,A,P);for(let q=0;q<U.length;q++)He(U[q],A,P,M);r(y.anchor,A,P);return}if($===Yo){G(y,A,P);return}if(M!==2&&k&1&&B)if(M===0)B.beforeEnter(O),r(O,A,P),ye(()=>B.enter(O),x);else{const{leave:q,delayLeave:J,afterLeave:et}=B,Z=()=>{y.ctx.isUnmounted?s(O):r(O,A,P)},ot=()=>{O._isLeaving&&O[Wm](!0),q(O,()=>{Z(),et&&et()})};J?J(O,Z,ot):ot()}else r(O,A,P)},Bt=(y,A,P,M=!1,x=!1)=>{const{type:O,props:$,ref:B,children:U,dynamicChildren:k,shapeFlag:Y,patchFlag:q,dirs:J,cacheIndex:et}=y;if(q===-2&&(x=!1),B!=null&&(Ze(),ms(B,null,P,y,!0),tn()),et!=null&&(A.renderCache[et]=void 0),Y&256){A.ctx.deactivate(y);return}const Z=Y&1&&J,ot=!Ir(y);let ht;if(ot&&(ht=$&&$.onVnodeBeforeUnmount)&&xe(ht,A,y),Y&6)Dn(y.component,P,M);else{if(Y&128){y.suspense.unmount(P,M);return}Z&&Fn(y,null,A,"beforeUnmount"),Y&64?y.type.remove(y,A,P,De,M):k&&!k.hasOnce&&(O!==kt||q>0&&q&64)?xn(k,A,P,!1,!0):(O===kt&&q&384||!x&&Y&16)&&xn(U,A,P),M&&jt(y)}(ot&&(ht=$&&$.onVnodeUnmounted)||Z)&&ye(()=>{ht&&xe(ht,A,y),Z&&Fn(y,null,A,"unmounted")},P)},jt=y=>{const{type:A,el:P,anchor:M,transition:x}=y;if(A===kt){Vo(P,M);return}if(A===Yo){z(y);return}const O=()=>{s(P),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(y.shapeFlag&1&&x&&!x.persisted){const{leave:$,delayLeave:B}=x,U=()=>$(P,O);B?B(y.el,O,U):U()}else O()},Vo=(y,A)=>{let P;for(;y!==A;)P=v(y),s(y),y=P;s(A)},Dn=(y,A,P)=>{const{bum:M,scope:x,job:O,subTree:$,um:B,m:U,a:k}=y;Hu(U),Hu(k),M&&Ei(M),x.stop(),O&&(O.flags|=8,Bt($,y,A,P)),B&&ye(B,A),ye(()=>{y.isUnmounted=!0},A)},xn=(y,A,P,M=!1,x=!1,O=0)=>{for(let $=O;$<y.length;$++)Bt(y[$],A,P,M,x)},ze=y=>{if(y.shapeFlag&6)return ze(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const A=v(y.anchor||y.el),P=A&&A[zm];return P?v(P):A};let jr=!1;const Gs=(y,A,P)=>{y==null?A._vnode&&Bt(A._vnode,null,null,!0):F(A._vnode||null,y,A,null,null,null,P),A._vnode=y,jr||(jr=!0,Fu(),sf(),jr=!1)},De={p:F,um:Bt,m:He,r:jt,mt:he,mc:g,pc:pt,pbc:T,n:ze,o:e};return{render:Gs,hydrate:void 0,createApp:mg(Gs)}}function Xo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ln({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Sg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Af(e,t,n=!1){const r=e.children,s=t.children;if(nt(r)&&nt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=fn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Af(a,l)),l.type===fo&&l.patchFlag!==-1&&(l.el=a.el),l.type===Gn&&!l.el&&(l.el=a.el)}}function Rg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function bf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:bf(t)}function Hu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Cg=Symbol.for("v-scx"),Pg=()=>_s(Cg);function Ii(e,t,n){return Sf(e,t,n)}function Sf(e,t,n=It){const{immediate:r,deep:s,flush:i,once:a}=n,l=ce({},n),c=t&&r||!t&&i!=="post";let f;if(Vs){if(i==="sync"){const b=Pg();f=b.__watcherHandles||(b.__watcherHandles=[])}else if(!c){const b=()=>{};return b.stop=Me,b.resume=Me,b.pause=Me,b}}const d=me;l.call=(b,V,F)=>je(b,d,V,F);let m=!1;i==="post"?l.scheduler=b=>{ye(b,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(b,V)=>{V?b():sl(b)}),l.augmentJob=b=>{t&&(b.flags|=4),m&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const v=jm(e,t,l);return Vs&&(f?f.push(v):c&&v()),v}function Vg(e,t,n){const r=this.proxy,s=Ut(e)?e.includes(".")?Rf(r,e):()=>r[e]:e.bind(r,r);let i;at(t)?i=t:(i=t.handler,n=t);const a=$s(this),l=Sf(s,i.bind(r),n);return a(),l}function Rf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Dg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Tn(t)}Modifiers`]||e[`${Xn(t)}Modifiers`];function xg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||It;let s=n;const i=t.startsWith("update:"),a=i&&Dg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Ut(d)?d.trim():d)),a.number&&(s=n.map(Ga)));let l,c=r[l=zo(t)]||r[l=zo(Tn(t))];!c&&i&&(c=r[l=zo(Xn(t))]),c&&je(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,je(f,e,6,s)}}const Ng=new WeakMap;function Cf(e,t,n=!1){const r=n?Ng:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!at(e)){const c=f=>{const d=Cf(f,t,!0);d&&(l=!0,ce(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(bt(e)&&r.set(e,null),null):(nt(i)?i.forEach(c=>a[c]=null):ce(a,i),bt(e)&&r.set(e,a),a)}function ho(e,t){return!e||!so(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,Xn(t))||_t(e,t))}function zu(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:m,data:v,setupState:b,ctx:V,inheritAttrs:F}=e,L=Mi(e);let K,W;try{if(n.shapeFlag&4){const z=s||r,lt=z;K=ke(f.call(lt,z,d,m,b,v,V)),W=l}else{const z=t;K=ke(z.length>1?z(m,{attrs:l,slots:a,emit:c}):z(m,null)),W=t.props?l:Og(l)}}catch(z){ys.length=0,uo(z,e,1),K=Xt(Gn)}let G=K;if(W&&F!==!1){const z=Object.keys(W),{shapeFlag:lt}=G;z.length&&lt&7&&(i&&z.some(za)&&(W=kg(W,i)),G=Cr(G,W,!1,!0))}return n.dirs&&(G=Cr(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(n.dirs):n.dirs),n.transition&&il(G,n.transition),K=G,Mi(L),K}const Og=e=>{let t;for(const n in e)(n==="class"||n==="style"||so(n))&&((t||(t={}))[n]=e[n]);return t},kg=(e,t)=>{const n={};for(const r in e)(!za(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Mg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Ku(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const v=d[m];if(a[v]!==r[v]&&!ho(f,v))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Ku(r,a,f):!0:!!a;return!1}function Ku(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!ho(n,i))return!0}return!1}function Fg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Pf=e=>e.__isSuspense;function Lg(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):Hm(e)}const kt=Symbol.for("v-fgt"),fo=Symbol.for("v-txt"),Gn=Symbol.for("v-cmt"),Yo=Symbol.for("v-stc"),ys=[];let ve=null;function At(e=!1){ys.push(ve=e?null:[])}function Ug(){ys.pop(),ve=ys[ys.length-1]||null}let Ps=1;function Wu(e,t=!1){Ps+=e,e<0&&ve&&t&&(ve.hasOnce=!0)}function Vf(e){return e.dynamicChildren=Ps>0?ve||vr:null,Ug(),Ps>0&&ve&&ve.push(e),e}function Nt(e,t,n,r,s,i){return Vf(Pt(e,t,n,r,s,i,!0))}function vs(e,t,n,r,s){return Vf(Xt(e,t,n,r,s,!0))}function ll(e){return e?e.__v_isVNode===!0:!1}function rs(e,t){return e.type===t.type&&e.key===t.key}const Df=({key:e})=>e??null,wi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ut(e)||Mt(e)||at(e)?{i:ue,r:e,k:t,f:!!n}:e:null);function Pt(e,t=null,n=null,r=0,s=null,i=e===kt?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Df(t),ref:t&&wi(t),scopeId:af,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ue};return l?(ul(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Ut(n)?8:16),Ps>0&&!a&&ve&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&ve.push(c),c}const Xt=Bg;function Bg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===og)&&(e=Gn),ll(e)){const l=Cr(e,t,!0);return n&&ul(l,n),Ps>0&&!i&&ve&&(l.shapeFlag&6?ve[ve.indexOf(e)]=l:ve.push(l)),l.patchFlag=-2,l}if(Jg(e)&&(e=e.__vccOpts),t){t=jg(t);let{class:l,style:c}=t;l&&!Ut(l)&&(t.class=Qa(l)),bt(c)&&(nl(c)&&!nt(c)&&(c=ce({},c)),t.style=kr(c))}const a=Ut(e)?1:Pf(e)?128:Km(e)?64:bt(e)?4:at(e)?2:0;return Pt(e,t,n,r,s,a,i,!0)}function jg(e){return e?nl(e)||yf(e)?ce({},e):e:null}function Cr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?$g(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Df(f),ref:t&&t.ref?n&&i?nt(i)?i.concat(wi(t)):[i,wi(t)]:wi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==kt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cr(e.ssContent),ssFallback:e.ssFallback&&Cr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&il(d,c.clone(d)),d}function dr(e=" ",t=0){return Xt(fo,null,e,t)}function ke(e){return e==null||typeof e=="boolean"?Xt(Gn):nt(e)?Xt(kt,null,e.slice()):ll(e)?fn(e):Xt(fo,null,String(e))}function fn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cr(e)}function ul(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(nt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ul(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!yf(t)?t._ctx=ue:s===3&&ue&&(ue.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:ue},n=32):(t=String(t),r&64?(n=16,t=[dr(t)]):n=8);e.children=t,e.shapeFlag|=n}function $g(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Qa([t.class,r.class]));else if(s==="style")t.style=kr([t.style,r.style]);else if(so(s)){const i=t[s],a=r[s];a&&i!==a&&!(nt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function xe(e,t,n,r=null){je(e,t,7,[n,r])}const qg=mf();let Hg=0;function zg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||qg,i={uid:Hg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ef(r,s),emitsOptions:Cf(r,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=xg.bind(null,i),e.ce&&e.ce(i),i}let me=null;const xf=()=>me||ue;let Ui,va;{const e=oo(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Ui=t("__VUE_INSTANCE_SETTERS__",n=>me=n),va=t("__VUE_SSR_SETTERS__",n=>Vs=n)}const $s=e=>{const t=me;return Ui(e),e.scope.on(),()=>{e.scope.off(),Ui(t)}},Gu=()=>{me&&me.scope.off(),Ui(null)};function Nf(e){return e.vnode.shapeFlag&4}let Vs=!1;function Kg(e,t=!1,n=!1){t&&va(t);const{props:r,children:s}=e.vnode,i=Nf(e);yg(e,r,i,t),Ig(e,s,n||t);const a=i?Wg(e,t):void 0;return t&&va(!1),a}function Wg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,lg);const{setup:r}=n;if(r){Ze();const s=e.setupContext=r.length>1?Qg(e):null,i=$s(e),a=Bs(r,e,0,[e.props,s]),l=Ch(a);if(tn(),i(),(l||e.sp)&&!Ir(e)&&lf(e),l){if(a.then(Gu,Gu),t)return a.then(c=>{Qu(e,c)}).catch(c=>{uo(c,e,0)});e.asyncDep=a}else Qu(e,a)}else Of(e)}function Qu(e,t,n){at(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=tf(t)),Of(e)}function Of(e,t,n){const r=e.type;e.render||(e.render=r.render||Me);{const s=$s(e);Ze();try{ug(e)}finally{tn(),s()}}}const Gg={get(e,t){return ae(e,"get",""),e[t]}};function Qg(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Gg),slots:e.slots,emit:e.emit,expose:t}}function po(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(tf(rl(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in gs)return gs[n](e)},has(t,n){return n in t||n in gs}})):e.proxy}function Jg(e){return at(e)&&"__vccOpts"in e}const yr=(e,t)=>Um(e,t,Vs),Xg="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ea;const Ju=typeof window<"u"&&window.trustedTypes;if(Ju)try{Ea=Ju.createPolicy("vue",{createHTML:e=>e})}catch{}const kf=Ea?e=>Ea.createHTML(e):e=>e,Yg="http://www.w3.org/2000/svg",Zg="http://www.w3.org/1998/Math/MathML",Qe=typeof document<"u"?document:null,Xu=Qe&&Qe.createElement("template"),t_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Qe.createElementNS(Yg,e):t==="mathml"?Qe.createElementNS(Zg,e):n?Qe.createElement(e,{is:n}):Qe.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Qe.createTextNode(e),createComment:e=>Qe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Xu.innerHTML=kf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Xu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},e_=Symbol("_vtc");function n_(e,t,n){const r=e[e_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Yu=Symbol("_vod"),r_=Symbol("_vsh"),s_=Symbol(""),i_=/(?:^|;)\s*display\s*:/;function o_(e,t,n){const r=e.style,s=Ut(n);let i=!1;if(n&&!s){if(t)if(Ut(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ai(r,l,"")}else for(const a in t)n[a]==null&&Ai(r,a,"");for(const a in n)a==="display"&&(i=!0),Ai(r,a,n[a])}else if(s){if(t!==n){const a=r[s_];a&&(n+=";"+a),r.cssText=n,i=i_.test(n)}}else t&&e.removeAttribute("style");Yu in e&&(e[Yu]=i?r.display:"",e[r_]&&(r.display="none"))}const Zu=/\s*!important$/;function Ai(e,t,n){if(nt(n))n.forEach(r=>Ai(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=a_(e,t);Zu.test(n)?e.setProperty(Xn(r),n.replace(Zu,""),"important"):e[r]=n}}const tc=["Webkit","Moz","ms"],Zo={};function a_(e,t){const n=Zo[t];if(n)return n;let r=Tn(t);if(r!=="filter"&&r in e)return Zo[t]=r;r=Dh(r);for(let s=0;s<tc.length;s++){const i=tc[s]+r;if(i in e)return Zo[t]=i}return t}const ec="http://www.w3.org/1999/xlink";function nc(e,t,n,r,s,i=um(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ec,t.slice(6,t.length)):e.setAttributeNS(ec,t,n):n==null||i&&!Nh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Pe(n)?String(n):n)}function rc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?kf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Nh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function $n(e,t,n,r){e.addEventListener(t,n,r)}function l_(e,t,n,r){e.removeEventListener(t,n,r)}const sc=Symbol("_vei");function u_(e,t,n,r,s=null){const i=e[sc]||(e[sc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=c_(t);if(r){const f=i[t]=d_(r,s);$n(e,l,f,c)}else a&&(l_(e,l,a,c),i[t]=void 0)}}const ic=/(?:Once|Passive|Capture)$/;function c_(e){let t;if(ic.test(e)){t={};let r;for(;r=e.match(ic);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xn(e.slice(2)),t]}let ta=0;const h_=Promise.resolve(),f_=()=>ta||(h_.then(()=>ta=0),ta=Date.now());function d_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;je(p_(r,n.value),t,5,[r])};return n.value=e,n.attached=f_(),n}function p_(e,t){if(nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const oc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,m_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?n_(e,r,a):t==="style"?o_(e,n,r):so(t)?za(t)||u_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):g_(e,t,r,a))?(rc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&nc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ut(r))?rc(e,Tn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),nc(e,t,r,a))};function g_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&oc(t)&&at(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return oc(t)&&Ut(n)?!1:t in e}const Bi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?n=>Ei(t,n):t};function __(e){e.target.composing=!0}function ac(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const wr=Symbol("_assign");function lc(e,t,n){return t&&(e=e.trim()),n&&(e=Ga(e)),e}const y_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[wr]=Bi(s);const i=r||s.props&&s.props.type==="number";$n(e,t?"change":"input",a=>{a.target.composing||e[wr](lc(e.value,n,i))}),(n||i)&&$n(e,"change",()=>{e.value=lc(e.value,n,i)}),t||($n(e,"compositionstart",__),$n(e,"compositionend",ac),$n(e,"change",ac))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[wr]=Bi(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Ga(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},ss={created(e,{value:t},n){e.checked=Di(t,n.props.value),e[wr]=Bi(n),$n(e,"change",()=>{e[wr](v_(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[wr]=Bi(r),t!==n&&(e.checked=Di(t,r.props.value))}};function v_(e){return"_value"in e?e._value:e.value}const E_=ce({patchProp:m_},t_);let uc;function T_(){return uc||(uc=Ag(E_))}const I_=((...e)=>{const t=T_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=A_(r);if(!s)return;const i=t._component;!at(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,w_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function w_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function A_(e){return Ut(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Mf;const mo=e=>Mf=e,Ff=Symbol();function Ta(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Es;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Es||(Es={}));function b_(){const e=Fh(!0),t=e.run(()=>Zh({}));let n=[],r=[];const s=rl({install(i){mo(s),s._a=i,i.provide(Ff,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Lf=()=>{};function cc(e,t,n,r=Lf){e.add(t);const s=()=>{e.delete(t)&&r()};return!n&&Lh()&&hm(s),s}function cr(e,...t){e.forEach(n=>{n(...t)})}const S_=e=>e(),hc=Symbol(),ea=Symbol();function Ia(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Ta(s)&&Ta(r)&&e.hasOwnProperty(n)&&!Mt(r)&&!gn(r)?e[n]=Ia(s,r):e[n]=r}return e}const R_=Symbol();function C_(e){return!Ta(e)||!Object.prototype.hasOwnProperty.call(e,R_)}const{assign:cn}=Object;function P_(e){return!!(Mt(e)&&e.effect)}function V_(e,t,n,r){const{state:s,actions:i,getters:a}=t,l=n.state.value[e];let c;function f(){l||(n.state.value[e]=s?s():{});const d=km(n.state.value[e]);return cn(d,i,Object.keys(a||{}).reduce((m,v)=>(m[v]=rl(yr(()=>{mo(n);const b=n._s.get(e);return a[v].call(b,b)})),m),{}))}return c=Uf(e,f,t,n,r,!0),c}function Uf(e,t,n={},r,s,i){let a;const l=cn({actions:{}},n),c={deep:!0};let f,d,m=new Set,v=new Set,b;const V=r.state.value[e];!i&&!V&&(r.state.value[e]={}),Zh({});let F;function L(g){let _;f=d=!1,typeof g=="function"?(g(r.state.value[e]),_={type:Es.patchFunction,storeId:e,events:b}):(Ia(r.state.value[e],g),_={type:Es.patchObject,payload:g,storeId:e,events:b});const T=F=Symbol();nf().then(()=>{F===T&&(f=!0)}),d=!0,cr(m,_,r.state.value[e])}const K=i?function(){const{state:_}=n,T=_?_():{};this.$patch(w=>{cn(w,T)})}:Lf;function W(){a.stop(),m.clear(),v.clear(),r._s.delete(e)}const G=(g,_="")=>{if(hc in g)return g[ea]=_,g;const T=function(){mo(r);const w=Array.from(arguments),S=new Set,E=new Set;function he(it){S.add(it)}function Ve(it){E.add(it)}cr(v,{args:w,name:T[ea],store:lt,after:he,onError:Ve});let Vt;try{Vt=g.apply(this&&this.$id===e?this:lt,w)}catch(it){throw cr(E,it),it}return Vt instanceof Promise?Vt.then(it=>(cr(S,it),it)).catch(it=>(cr(E,it),Promise.reject(it))):(cr(S,Vt),Vt)};return T[hc]=!0,T[ea]=_,T},z={_p:r,$id:e,$onAction:cc.bind(null,v),$patch:L,$reset:K,$subscribe(g,_={}){const T=cc(m,g,_.detached,()=>w()),w=a.run(()=>Ii(()=>r.state.value[e],S=>{(_.flush==="sync"?d:f)&&g({storeId:e,type:Es.direct,events:b},S)},cn({},c,_)));return T},$dispose:W},lt=lo(z);r._s.set(e,lt);const I=(r._a&&r._a.runWithContext||S_)(()=>r._e.run(()=>(a=Fh()).run(()=>t({action:G}))));for(const g in I){const _=I[g];if(Mt(_)&&!P_(_)||gn(_))i||(V&&C_(_)&&(Mt(_)?_.value=V[g]:Ia(_,V[g])),r.state.value[e][g]=_);else if(typeof _=="function"){const T=G(_,g);I[g]=T,l.actions[g]=_}}return cn(lt,I),cn(gt(lt),I),Object.defineProperty(lt,"$state",{get:()=>r.state.value[e],set:g=>{L(_=>{cn(_,g)})}}),r._p.forEach(g=>{cn(lt,a.run(()=>g({store:lt,app:r._a,pinia:r,options:l})))}),V&&i&&n.hydrate&&n.hydrate(lt.$state,V),f=!0,d=!0,lt}/*! #__NO_SIDE_EFFECTS__ */function D_(e,t,n){let r;const s=typeof t=="function";r=s?n:t;function i(a,l){const c=_g();return a=a||(c?_s(Ff,null):null),a&&mo(a),a=Mf,a._s.has(e)||(s?Uf(e,t,r,a):V_(e,r,a)),a._s.get(e)}return i.$id=e,i}function x_(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n===void 0||n[t[r]]===void 0)return;if(n===null||n[t[r]]===null)return null;n=n[t[r]]}return n}function cl(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=cl(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function Bf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return cl(e,Bf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function jf(e,t){return t.map(n=>n.split(".")).map(n=>[n,x_(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>cl(n,r[1],r[0]),{})}function $f(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>Bf(n,r),e)}function fc(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a,beforeHydrate:l,afterHydrate:c},f,d=!0){try{d&&(l==null||l(f));const m=t.getItem(r);if(m){const v=n.deserialize(m),b=i?jf(v,i):v,V=a?$f(b,a):b;e.$patch(V)}d&&(c==null||c(f))}catch(m){s&&console.error("[pinia-plugin-persistedstate]",m)}}function dc(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a}){try{const l=i?jf(e,i):e,c=a?$f(l,a):l,f=n.serialize(c);t.setItem(r,f)}catch(l){s&&console.error("[pinia-plugin-persistedstate]",l)}}function N_(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function O_(e,t,n){const{pinia:r,store:s,options:{persist:i=n}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(s.$id in r.state.value)){const l=r._s.get(s.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(t);s.$hydrate=({runHooks:l=!0}={})=>{a.forEach(c=>{fc(s,c,e,l)})},s.$persist=()=>{a.forEach(l=>{dc(s.$state,l)})},a.forEach(l=>{fc(s,l,e),s.$subscribe((c,f)=>dc(f,l),{detached:!0})})}function k_(e={}){return function(t){O_(t,n=>{const r=N_(n.key,t.store.$id);return{key:(e.key?e.key:s=>s)(r),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>JSON.parse(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate??e.beforeHydrate,afterHydrate:n.afterHydrate??e.afterHydrate,pick:n.pick,omit:n.omit}},e.auto??!1)}}var M_=k_();const Yn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},F_={},L_={class:"carafe"};function U_(e,t){return At(),Nt("div",L_,[Ti(e.$slots,"top",{},void 0,!0),Ti(e.$slots,"mid",{},void 0,!0),Ti(e.$slots,"bottom",{},void 0,!0)])}const B_=Yn(F_,[["render",U_],["__scopeId","data-v-43d2bfc5"]]),j_={},$_={class:"mug"};function q_(e,t){return At(),Nt("div",$_,[Ti(e.$slots,"default")])}const H_=Yn(j_,[["render",q_]]),z_=js({__name:"Syrup",props:{color:{}},setup(e){const t=e;return(n,r)=>(At(),Nt("div",{class:"syrup",style:kr({backgroundColor:t.color})},null,4))}}),K_=Yn(z_,[["__scopeId","data-v-16f00402"]]),W_=js({__name:"Base",props:{color:{}},setup(e){const t=e;return(n,r)=>(At(),Nt("div",{class:"baseBeverage",style:kr({backgroundColor:t.color})},null,4))}}),na=Yn(W_,[["__scopeId","data-v-0101872a"]]),G_={class:"froth"},Q_=js({__name:"Creamer",props:{color:{type:String,default:"#transparent"}},setup(e){return(t,n)=>(At(),Nt("div",G_,[(At(),Nt(kt,null,dn(5,()=>Pt("div",{class:"foam",style:kr({backgroundColor:e.color})},null,4)),64))]))}}),pc=Yn(Q_,[["__scopeId","data-v-2173deeb"]]),J_={},X_={id:"steam"},Y_={class:"stream"};function Z_(e,t){return At(),Nt("div",X_,[(At(),Nt(kt,null,dn(3,()=>Pt("div",Y_)),64))])}const ty=Yn(J_,[["render",Z_]]),ey={},ny={id:"condensation"},ry={class:"flake"};function sy(e,t){return At(),Nt("div",ny,[(At(),Nt(kt,null,dn(3,()=>Pt("div",ry)),64))])}const iy=Yn(ey,[["render",sy]]),mc=["Hot","Cold"],oy=()=>{};var gc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},ay=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Hf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|f>>6,b=f&63;c||(b=64,a||(v=64)),r.push(n[d],n[m],n[v],n[b])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ay(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new ly;const v=i<<2|l>>4;if(r.push(v),f!==64){const b=l<<4&240|f>>2;if(r.push(b),m!==64){const V=f<<6&192|m;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ly extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uy=function(e){const t=qf(e);return Hf.encodeByteArray(t,!0)},ji=function(e){return uy(e).replace(/\./g,"")},cy=function(e){try{return Hf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=()=>hy().__FIREBASE_DEFAULTS__,dy=()=>{if(typeof process>"u"||typeof gc>"u")return;const e=gc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},py=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&cy(e[1]);return t&&JSON.parse(t)},hl=()=>{try{return oy()||fy()||dy()||py()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},my=e=>{var t,n;return(n=(t=hl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},gy=e=>{const t=my(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},zf=()=>{var e;return(e=hl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yy(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ji(JSON.stringify(n)),ji(JSON.stringify(a)),""].join(".")}const Ts={};function Ey(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ts))Ts[t]?e.emulator.push(t):e.prod.push(t);return e}function Ty(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let _c=!1;function Iy(e,t){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||Ts[e]===t||Ts[e]||_c)return;Ts[e]=t;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",i=Ey().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{_c=!0,a()},v}function d(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=Ty(r),b=n("text"),V=document.getElementById(b)||document.createElement("span"),F=n("learnmore"),L=document.getElementById(F)||document.createElement("a"),K=n("preprendIcon"),W=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const G=v.element;l(G),d(L,F);const z=f();c(W,K),G.append(W,V,L,z),document.body.appendChild(G)}i?(V.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ay(){var e;const t=(e=hl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function by(){return!Ay()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sy(){try{return typeof indexedDB=="object"}catch{return!1}}function Ry(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="FirebaseError";class Mr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Cy,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kf.prototype.create)}}class Kf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Py(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Mr(s,l,r)}}function Py(e,t){return e.replace(Vy,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Vy=/\{\$([^}]+)}/g;function $i(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(yc(i)&&yc(a)){if(!$i(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(e){return e&&e._delegate?e._delegate:e}class Ds{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new _y;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ny(t))try{this.getOrInitializeService({instanceIdentifier:jn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=jn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=jn){return this.instances.has(t)}getOptions(t=jn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xy(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=jn){return this.component?this.component.multipleInstances?t:jn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xy(e){return e===jn?void 0:e}function Ny(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Dy(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(dt||(dt={}));const ky={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},My=dt.INFO,Fy={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},Ly=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Fy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wf{constructor(t){this.name=t,this._logLevel=My,this._logHandler=Ly,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ky[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}const Uy=(e,t)=>t.some(n=>e instanceof n);let vc,Ec;function By(){return vc||(vc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jy(){return Ec||(Ec=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gf=new WeakMap,wa=new WeakMap,Qf=new WeakMap,ra=new WeakMap,dl=new WeakMap;function $y(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(_n(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Gf.set(n,e)}).catch(()=>{}),dl.set(t,e),t}function qy(e){if(wa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});wa.set(e,t)}let Aa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return wa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Qf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Hy(e){Aa=e(Aa)}function zy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(sa(this),t,...n);return Qf.set(r,t.sort?t.sort():[t]),_n(r)}:jy().includes(e)?function(...t){return e.apply(sa(this),t),_n(Gf.get(this))}:function(...t){return _n(e.apply(sa(this),t))}}function Ky(e){return typeof e=="function"?zy(e):(e instanceof IDBTransaction&&qy(e),Uy(e,By())?new Proxy(e,Aa):e)}function _n(e){if(e instanceof IDBRequest)return $y(e);if(ra.has(e))return ra.get(e);const t=Ky(e);return t!==e&&(ra.set(e,t),dl.set(t,e)),t}const sa=e=>dl.get(e);function Wy(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=_n(a);return r&&a.addEventListener("upgradeneeded",c=>{r(_n(a.result),c.oldVersion,c.newVersion,_n(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Gy=["get","getKey","getAll","getAllKeys","count"],Qy=["put","add","delete","clear"],ia=new Map;function Tc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ia.get(t))return ia.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Qy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Gy.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return ia.set(t,i),i}Hy(e=>({...e,get:(t,n,r)=>Tc(t,n)||e.get(t,n,r),has:(t,n)=>!!Tc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Xy(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ba="@firebase/app",Ic="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new Wf("@firebase/app"),Yy="@firebase/app-compat",Zy="@firebase/analytics-compat",tv="@firebase/analytics",ev="@firebase/app-check-compat",nv="@firebase/app-check",rv="@firebase/auth",sv="@firebase/auth-compat",iv="@firebase/database",ov="@firebase/data-connect",av="@firebase/database-compat",lv="@firebase/functions",uv="@firebase/functions-compat",cv="@firebase/installations",hv="@firebase/installations-compat",fv="@firebase/messaging",dv="@firebase/messaging-compat",pv="@firebase/performance",mv="@firebase/performance-compat",gv="@firebase/remote-config",_v="@firebase/remote-config-compat",yv="@firebase/storage",vv="@firebase/storage-compat",Ev="@firebase/firestore",Tv="@firebase/ai",Iv="@firebase/firestore-compat",wv="firebase",Av="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]",bv={[ba]:"fire-core",[Yy]:"fire-core-compat",[tv]:"fire-analytics",[Zy]:"fire-analytics-compat",[nv]:"fire-app-check",[ev]:"fire-app-check-compat",[rv]:"fire-auth",[sv]:"fire-auth-compat",[iv]:"fire-rtdb",[ov]:"fire-data-connect",[av]:"fire-rtdb-compat",[lv]:"fire-fn",[uv]:"fire-fn-compat",[cv]:"fire-iid",[hv]:"fire-iid-compat",[fv]:"fire-fcm",[dv]:"fire-fcm-compat",[pv]:"fire-perf",[mv]:"fire-perf-compat",[gv]:"fire-rc",[_v]:"fire-rc-compat",[yv]:"fire-gcs",[vv]:"fire-gcs-compat",[Ev]:"fire-fst",[Iv]:"fire-fst-compat",[Tv]:"fire-vertex","fire-js":"fire-js",[wv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Map,Sv=new Map,Ra=new Map;function wc(e,t){try{e.container.addComponent(t)}catch(n){en.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Hi(e){const t=e.name;if(Ra.has(t))return en.debug(`There were multiple attempts to register component ${t}.`),!1;Ra.set(t,e);for(const n of qi.values())wc(n,e);for(const n of Sv.values())wc(n,e);return!0}function Rv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Cv(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yn=new Kf("app","Firebase",Pv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=Av;function Jf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Sa,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw yn.create("bad-app-name",{appName:String(s)});if(n||(n=zf()),!n)throw yn.create("no-options");const i=qi.get(s);if(i){if($i(n,i.options)&&$i(r,i.config))return i;throw yn.create("duplicate-app",{appName:s})}const a=new Oy(s);for(const c of Ra.values())a.addComponent(c);const l=new Vv(n,r,a);return qi.set(s,l),l}function xv(e=Sa){const t=qi.get(e);if(!t&&e===Sa&&zf())return Jf();if(!t)throw yn.create("no-app",{appName:e});return t}function Ar(e,t,n){var r;let s=(r=bv[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),en.warn(l.join(" "));return}Hi(new Ds(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="firebase-heartbeat-database",Ov=1,xs="firebase-heartbeat-store";let oa=null;function Xf(){return oa||(oa=Wy(Nv,Ov,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xs)}catch(n){console.warn(n)}}}}).catch(e=>{throw yn.create("idb-open",{originalErrorMessage:e.message})})),oa}async function kv(e){try{const n=(await Xf()).transaction(xs),r=await n.objectStore(xs).get(Yf(e));return await n.done,r}catch(t){if(t instanceof Mr)en.warn(t.message);else{const n=yn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});en.warn(n.message)}}}async function Ac(e,t){try{const r=(await Xf()).transaction(xs,"readwrite");await r.objectStore(xs).put(t,Yf(e)),await r.done}catch(n){if(n instanceof Mr)en.warn(n.message);else{const r=yn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});en.warn(r.message)}}}function Yf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=1024,Fv=30;class Lv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Fv){const a=jv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){en.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bc(),{heartbeatsToSend:r,unsentEntries:s}=Uv(this._heartbeatsCache.heartbeats),i=ji(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return en.warn(n),""}}}function bc(){return new Date().toISOString().substring(0,10)}function Uv(e,t=Mv){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Sc(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Sc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sy()?Ry().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ac(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ac(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Sc(e){return ji(JSON.stringify({version:2,heartbeats:e})).length}function jv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(e){Hi(new Ds("platform-logger",t=>new Jy(t),"PRIVATE")),Hi(new Ds("heartbeat",t=>new Lv(t),"PRIVATE")),Ar(ba,Ic,e),Ar(ba,Ic,"esm2017"),Ar("fire-js","")}$v("");var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vn,Zf;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,g){function _(){}_.prototype=g.prototype,I.D=g.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,w,S){for(var E=Array(arguments.length-2),he=2;he<arguments.length;he++)E[he-2]=arguments[he];return g.prototype[w].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,g,_){_||(_=0);var T=Array(16);if(typeof g=="string")for(var w=0;16>w;++w)T[w]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(w=0;16>w;++w)T[w]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=I.g[0],_=I.g[1],w=I.g[2];var S=I.g[3],E=g+(S^_&(w^S))+T[0]+3614090360&4294967295;g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[1]+3905402710&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[2]+606105819&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[3]+3250441966&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[4]+4118548399&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[5]+1200080426&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[6]+2821735955&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[7]+4249261313&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[8]+1770035416&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[9]+2336552879&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[10]+4294925233&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[11]+2304563134&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[12]+1804603682&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[13]+4254626195&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[14]+2792965006&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[15]+1236535329&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(w^S&(_^w))+T[1]+4129170786&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[6]+3225465664&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[11]+643717713&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[0]+3921069994&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[5]+3593408605&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[10]+38016083&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[15]+3634488961&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[4]+3889429448&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[9]+568446438&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[14]+3275163606&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[3]+4107603335&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[8]+1163531501&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[13]+2850285829&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[2]+4243563512&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[7]+1735328473&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[12]+2368359562&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(_^w^S)+T[5]+4294588738&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[8]+2272392833&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[11]+1839030562&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[14]+4259657740&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[1]+2763975236&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[4]+1272893353&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[7]+4139469664&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[10]+3200236656&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[13]+681279174&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[0]+3936430074&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[3]+3572445317&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[6]+76029189&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[9]+3654602809&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[12]+3873151461&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[15]+530742520&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[2]+3299628645&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(w^(_|~S))+T[0]+4096336452&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[7]+1126891415&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[14]+2878612391&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[5]+4237533241&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[12]+1700485571&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[3]+2399980690&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[10]+4293915773&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[1]+2240044497&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[8]+1873313359&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[15]+4264355552&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[6]+2734768916&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[13]+1309151649&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[4]+4149444226&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[11]+3174756917&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[2]+718787259&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var _=g-this.blockSize,T=this.B,w=this.h,S=0;S<g;){if(w==0)for(;S<=_;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<g;)if(T[w++]=I.charCodeAt(S++),w==this.blockSize){s(this,T),w=0;break}}else for(;S<g;)if(T[w++]=I[S++],w==this.blockSize){s(this,T),w=0;break}}this.h=w,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var _=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=_&255,_/=256;for(this.u(I),I=Array(16),g=_=0;4>g;++g)for(var T=0;32>T;T+=8)I[_++]=this.g[g]>>>T&255;return I};function i(I,g){var _=l;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=g(I)}function a(I,g){this.h=g;for(var _=[],T=!0,w=I.length-1;0<=w;w--){var S=I[w]|0;T&&S==g||(_[w]=S,T=!1)}this.g=_}var l={};function c(I){return-128<=I&&128>I?i(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return L(f(-I));for(var g=[],_=1,T=0;I>=_;T++)g[T]=I/_|0,_*=4294967296;return new a(g,0)}function d(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return L(d(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=f(Math.pow(g,8)),T=m,w=0;w<I.length;w+=8){var S=Math.min(8,I.length-w),E=parseInt(I.substring(w,w+S),g);8>S?(S=f(Math.pow(g,S)),T=T.j(S).add(f(E))):(T=T.j(_),T=T.add(f(E)))}return T}var m=c(0),v=c(1),b=c(16777216);e=a.prototype,e.m=function(){if(F(this))return-L(this).m();for(var I=0,g=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*g,g*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(F(this))return"-"+L(this).toString(I);for(var g=f(Math.pow(I,6)),_=this,T="";;){var w=z(_,g).g;_=K(_,w.j(g));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=w,V(_))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function F(I){return I.h==-1}e.l=function(I){return I=K(this,I),F(I)?-1:V(I)?0:1};function L(I){for(var g=I.g.length,_=[],T=0;T<g;T++)_[T]=~I.g[T];return new a(_,~I.h).add(v)}e.abs=function(){return F(this)?L(this):this},e.add=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0,w=0;w<=g;w++){var S=T+(this.i(w)&65535)+(I.i(w)&65535),E=(S>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);T=E>>>16,S&=65535,E&=65535,_[w]=E<<16|S}return new a(_,_[_.length-1]&-2147483648?-1:0)};function K(I,g){return I.add(L(g))}e.j=function(I){if(V(this)||V(I))return m;if(F(this))return F(I)?L(this).j(L(I)):L(L(this).j(I));if(F(I))return L(this.j(L(I)));if(0>this.l(b)&&0>I.l(b))return f(this.m()*I.m());for(var g=this.g.length+I.g.length,_=[],T=0;T<2*g;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<I.g.length;w++){var S=this.i(T)>>>16,E=this.i(T)&65535,he=I.i(w)>>>16,Ve=I.i(w)&65535;_[2*T+2*w]+=E*Ve,W(_,2*T+2*w),_[2*T+2*w+1]+=S*Ve,W(_,2*T+2*w+1),_[2*T+2*w+1]+=E*he,W(_,2*T+2*w+1),_[2*T+2*w+2]+=S*he,W(_,2*T+2*w+2)}for(T=0;T<g;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=g;T<2*g;T++)_[T]=0;return new a(_,0)};function W(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function G(I,g){this.g=I,this.h=g}function z(I,g){if(V(g))throw Error("division by zero");if(V(I))return new G(m,m);if(F(I))return g=z(L(I),g),new G(L(g.g),L(g.h));if(F(g))return g=z(I,L(g)),new G(L(g.g),g.h);if(30<I.g.length){if(F(I)||F(g))throw Error("slowDivide_ only works with positive integers.");for(var _=v,T=g;0>=T.l(I);)_=lt(_),T=lt(T);var w=vt(_,1),S=vt(T,1);for(T=vt(T,2),_=vt(_,2);!V(T);){var E=S.add(T);0>=E.l(I)&&(w=w.add(_),S=E),T=vt(T,1),_=vt(_,1)}return g=K(I,w.j(g)),new G(w,g)}for(w=m;0<=I.l(g);){for(_=Math.max(1,Math.floor(I.m()/g.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=f(_),E=S.j(g);F(E)||0<E.l(I);)_-=T,S=f(_),E=S.j(g);V(S)&&(S=v),w=w.add(S),I=K(I,E)}return new G(w,I)}e.A=function(I){return z(this,I).h},e.and=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)&I.i(T);return new a(_,this.h&I.h)},e.or=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)|I.i(T);return new a(_,this.h|I.h)},e.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)^I.i(T);return new a(_,this.h^I.h)};function lt(I){for(var g=I.g.length+1,_=[],T=0;T<g;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new a(_,I.h)}function vt(I,g){var _=g>>5;g%=32;for(var T=I.g.length-_,w=[],S=0;S<T;S++)w[S]=0<g?I.i(S+_)>>>g|I.i(S+_+1)<<32-g:I.i(S+_);return new a(w,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Zf=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,vn=a}).apply(typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{});var pi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var td,ls,ed,bi,Ca,nd,rd,sd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof pi=="object"&&pi];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in h))break t;h=h[R]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,p=!1,R={next:function(){if(!p&&h<o.length){var C=h++;return{value:u(C,o[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function m(o,u,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,p),o.apply(u,R)}}return function(){return o.apply(u,arguments)}}function v(o,u,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,v.apply(null,arguments)}function b(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function V(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,R,C){for(var j=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)j[Et-2]=arguments[Et];return u.prototype[R].apply(p,j)}}function F(o){const u=o.length;if(0<u){const h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function L(o,u){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(c(p)){const R=o.length||0,C=p.length||0;o.length=R+C;for(let j=0;j<C;j++)o[R+j]=p[j]}else o.push(p)}}class K{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function W(o){return/^[\s\xa0]*$/.test(o)}function G(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function z(o){return z[" "](o),o}z[" "]=function(){};var lt=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function vt(o,u,h){for(const p in o)u.call(h,o[p],p,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function g(o){const u={};for(const h in o)u[h]=o[h];return u}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let h,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(h in p)o[h]=p[h];for(let C=0;C<_.length;C++)h=_[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function w(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function S(o){l.setTimeout(()=>{throw o},0)}function E(){var o=be;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class he{constructor(){this.h=this.g=null}add(u,h){const p=Ve.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Ve=new K(()=>new Vt,o=>o.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let it,pt=!1,be=new he,Vn=()=>{const o=l.Promise.resolve(void 0);it=()=>{o.then(He)}};var He=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){S(h)}var u=Ve;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}pt=!1};function Bt(){this.s=this.s,this.C=this.C}Bt.prototype.s=!1,Bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function jt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var Vo=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o})();function Dn(o,u){if(jt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(lt){t:{try{z(u.nodeName);var R=!0;break t}catch{}R=!1}R||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:xn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Dn.aa.h.call(this)}}V(Dn,jt);var xn={2:"touch",3:"pen",4:"mouse"};Dn.prototype.h=function(){Dn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),jr=0;function Gs(o,u,h,p,R){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=R,this.key=++jr,this.da=this.fa=!1}function De(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function $r(o){this.src=o,this.g={},this.h=0}$r.prototype.add=function(o,u,h,p,R){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var j=A(o,u,p,R);return-1<j?(u=o[j],h||(u.fa=!1)):(u=new Gs(u,this.src,C,!!p,R),u.fa=h,o.push(u)),u};function y(o,u){var h=u.type;if(h in o.g){var p=o.g[h],R=Array.prototype.indexOf.call(p,u,void 0),C;(C=0<=R)&&Array.prototype.splice.call(p,R,1),C&&(De(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function A(o,u,h,p){for(var R=0;R<o.length;++R){var C=o[R];if(!C.da&&C.listener==u&&C.capture==!!h&&C.ha==p)return R}return-1}var P="closure_lm_"+(1e6*Math.random()|0),M={};function x(o,u,h,p,R){if(Array.isArray(u)){for(var C=0;C<u.length;C++)x(o,u[C],h,p,R);return null}return h=et(h),o&&o[ze]?o.K(u,h,f(p)?!!p.capture:!1,R):O(o,u,h,!1,p,R)}function O(o,u,h,p,R,C){if(!u)throw Error("Invalid event type");var j=f(R)?!!R.capture:!!R,Et=q(o);if(Et||(o[P]=Et=new $r(o)),h=Et.add(u,h,p,j,C),h.proxy)return h;if(p=$(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)Vo||(R=j),R===void 0&&(R=!1),o.addEventListener(u.toString(),p,R);else if(o.attachEvent)o.attachEvent(k(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function $(){function o(h){return u.call(o.src,o.listener,h)}const u=Y;return o}function B(o,u,h,p,R){if(Array.isArray(u))for(var C=0;C<u.length;C++)B(o,u[C],h,p,R);else p=f(p)?!!p.capture:!!p,h=et(h),o&&o[ze]?(o=o.i,u=String(u).toString(),u in o.g&&(C=o.g[u],h=A(C,h,p,R),-1<h&&(De(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete o.g[u],o.h--)))):o&&(o=q(o))&&(u=o.g[u.toString()],o=-1,u&&(o=A(u,h,p,R)),(h=-1<o?u[o]:null)&&U(h))}function U(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[ze])y(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(k(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=q(u))?(y(h,o),h.h==0&&(h.src=null,u[P]=null)):De(o)}}}function k(o){return o in M?M[o]:M[o]="on"+o}function Y(o,u){if(o.da)o=!0;else{u=new Dn(u,this);var h=o.listener,p=o.ha||o.src;o.fa&&U(o),o=h.call(p,u)}return o}function q(o){return o=o[P],o instanceof $r?o:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(o){return typeof o=="function"?o:(o[J]||(o[J]=function(u){return o.handleEvent(u)}),o[J])}function Z(){Bt.call(this),this.i=new $r(this),this.M=this,this.F=null}V(Z,Bt),Z.prototype[ze]=!0,Z.prototype.removeEventListener=function(o,u,h,p){B(this,o,u,h,p)};function ot(o,u){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new jt(u,o);else if(u instanceof jt)u.target=u.target||o;else{var R=u;u=new jt(p,o),T(u,R)}if(R=!0,h)for(var C=h.length-1;0<=C;C--){var j=u.g=h[C];R=ht(j,p,!0,u)&&R}if(j=u.g=o,R=ht(j,p,!0,u)&&R,R=ht(j,p,!1,u)&&R,h)for(C=0;C<h.length;C++)j=u.g=h[C],R=ht(j,p,!1,u)&&R}Z.prototype.N=function(){if(Z.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],p=0;p<h.length;p++)De(h[p]);delete o.g[u],o.h--}}this.F=null},Z.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},Z.prototype.L=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function ht(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var R=!0,C=0;C<u.length;++C){var j=u[C];if(j&&!j.da&&j.capture==h){var Et=j.listener,Qt=j.ha||j.src;j.fa&&y(o.i,j),R=Et.call(Qt,p)!==!1&&R}}return R&&!p.defaultPrevented}function Kt(o,u,h){if(typeof o=="function")h&&(o=v(o,h));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Wt(o){o.g=Kt(()=>{o.g=null,o.i&&(o.i=!1,Wt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ee extends Bt{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ee(o){Bt.call(this),this.h=o,this.g={}}V(ee,Bt);var on=[];function qr(o){vt(o.g,function(u,h){this.g.hasOwnProperty(h)&&U(u)},o),o.g={}}ee.prototype.N=function(){ee.aa.N.call(this),qr(this)},ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=l.JSON.stringify,Te=l.JSON.parse,Qs=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function rr(){}rr.prototype.h=null;function $l(o){return o.h||(o.h=o.i())}function ql(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Do(){jt.call(this,"d")}V(Do,jt);function xo(){jt.call(this,"c")}V(xo,jt);var Nn={},Hl=null;function Js(){return Hl=Hl||new Z}Nn.La="serverreachability";function zl(o){jt.call(this,Nn.La,o)}V(zl,jt);function zr(o){const u=Js();ot(u,new zl(u))}Nn.STAT_EVENT="statevent";function Kl(o,u){jt.call(this,Nn.STAT_EVENT,o),this.stat=u}V(Kl,jt);function fe(o){const u=Js();ot(u,new Kl(u,o))}Nn.Ma="timingevent";function Wl(o,u){jt.call(this,Nn.Ma,o),this.size=u}V(Wl,jt);function Kr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function Dp(o,u,h,p,R,C){o.info(function(){if(o.g)if(C)for(var j="",Et=C.split("&"),Qt=0;Qt<Et.length;Qt++){var mt=Et[Qt].split("=");if(1<mt.length){var ne=mt[0];mt=mt[1];var re=ne.split("_");j=2<=re.length&&re[1]=="type"?j+(ne+"="+mt+"&"):j+(ne+"=redacted&")}}else j=null;else j=C;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+u+`
`+h+`
`+j})}function xp(o,u,h,p,R,C,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+u+`
`+h+`
`+C+" "+j})}function sr(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Op(o,h)+(p?" "+p:"")})}function Np(o,u){o.info(function(){return"TIMEOUT: "+u})}Wr.prototype.info=function(){};function Op(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var R=p[1];if(Array.isArray(R)&&!(1>R.length)){var C=R[0];if(C!="noop"&&C!="stop"&&C!="close")for(var j=1;j<R.length;j++)R[j]=""}}}}return Gt(h)}catch{return u}}var Xs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},No;function Ys(){}V(Ys,rr),Ys.prototype.g=function(){return new XMLHttpRequest},Ys.prototype.i=function(){return{}},No=new Ys;function an(o,u,h,p){this.j=o,this.i=u,this.l=h,this.R=p||1,this.U=new ee(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ql}function Ql(){this.i=null,this.g="",this.h=!1}var Jl={},Oo={};function ko(o,u,h){o.L=1,o.v=ni(Ke(u)),o.m=h,o.P=!0,Xl(o,null)}function Xl(o,u){o.F=Date.now(),Zs(o),o.A=Ke(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),hu(h.i,"t",p),o.C=0,h=o.j.J,o.h=new Ql,o.g=Pu(o.j,h?u:null,!o.m),0<o.O&&(o.M=new Ee(v(o.Y,o,o.g),o.O)),u=o.U,h=o.g,p=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(on[0]=R.toString()),R=on);for(var C=0;C<R.length;C++){var j=x(h,R[C],p||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),zr(),Dp(o.i,o.u,o.A,o.l,o.R,o.m)}an.prototype.ca=function(o){o=o.target;const u=this.M;u&&We(o)==3?u.j():this.Y(o)},an.prototype.Y=function(o){try{if(o==this.g)t:{const re=We(this.g);var u=this.g.Ba();const ar=this.g.Z();if(!(3>re)&&(re!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||re!=4||u==7||(u==8||0>=ar?zr(3):zr(2)),Mo(this);var h=this.g.Z();this.X=h;e:if(Yl(this)){var p=yu(this.g);o="";var R=p.length,C=We(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),Gr(this);var j="";break e}this.h.i=new l.TextDecoder}for(u=0;u<R;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(C&&u==R-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,xp(this.i,this.u,this.A,this.l,this.R,re,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Et,Qt=this.g;if((Et=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Et)){var mt=Et;break e}}mt=null}if(h=mt)sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fo(this,h);else{this.o=!1,this.s=3,fe(12),On(this),Gr(this);break t}}if(this.P){h=!0;let Se;for(;!this.J&&this.C<j.length;)if(Se=kp(this,j),Se==Oo){re==4&&(this.s=4,fe(14),h=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Se==Jl){this.s=4,fe(15),sr(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else sr(this.i,this.l,Se,null),Fo(this,Se);if(Yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||j.length!=0||this.h.h||(this.s=1,fe(16),h=!1),this.o=this.o&&h,!h)sr(this.i,this.l,j,"[Invalid Chunked Response]"),On(this),Gr(this);else if(0<j.length&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.ba&&!ne.M&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),qo(ne),ne.M=!0,fe(11))}}else sr(this.i,this.l,j,null),Fo(this,j);re==4&&On(this),this.o&&!this.J&&(re==4?bu(this.j,this):(this.o=!1,Zs(this)))}else Yp(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,fe(12)):(this.s=0,fe(13)),On(this),Gr(this)}}}catch{}finally{}};function Yl(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function kp(o,u){var h=o.C,p=u.indexOf(`
`,h);return p==-1?Oo:(h=Number(u.substring(h,p)),isNaN(h)?Jl:(p+=1,p+h>u.length?Oo:(u=u.slice(p,p+h),o.C=p+h,u)))}an.prototype.cancel=function(){this.J=!0,On(this)};function Zs(o){o.S=Date.now()+o.I,Zl(o,o.I)}function Zl(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Kr(v(o.ba,o),u)}function Mo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}an.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Np(this.i,this.A),this.L!=2&&(zr(),fe(17)),On(this),this.s=2,Gr(this)):Zl(this,this.S-o)};function Gr(o){o.j.G==0||o.J||bu(o.j,o)}function On(o){Mo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,qr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Fo(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||Lo(h.h,o))){if(!o.K&&Lo(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)li(h),oi(h);else break t;$o(h),fe(18)}}else h.za=R[1],0<h.za-h.T&&37500>R[2]&&h.F&&h.v==0&&!h.C&&(h.C=Kr(v(h.Za,h),6e3));if(1>=nu(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Mn(h,11)}else if((o.K||h.g==o)&&li(h),!W(u))for(R=h.Da.g.parse(u),u=0;u<R.length;u++){let mt=R[u];if(h.T=mt[0],mt=mt[1],h.G==2)if(mt[0]=="c"){h.K=mt[1],h.ia=mt[2];const ne=mt[3];ne!=null&&(h.la=ne,h.j.info("VER="+h.la));const re=mt[4];re!=null&&(h.Aa=re,h.j.info("SVER="+h.Aa));const ar=mt[5];ar!=null&&typeof ar=="number"&&0<ar&&(p=1.5*ar,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const Se=o.g;if(Se){const ci=Se.g?Se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ci){var C=p.h;C.g||ci.indexOf("spdy")==-1&&ci.indexOf("quic")==-1&&ci.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Uo(C,C.h),C.h=null))}if(p.D){const Ho=Se.g?Se.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(p.ya=Ho,St(p.I,p.D,Ho))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var j=o;if(p.qa=Cu(p,p.J?p.ia:null,p.W),j.K){ru(p.h,j);var Et=j,Qt=p.L;Qt&&(Et.I=Qt),Et.B&&(Mo(Et),Zs(Et)),p.g=j}else wu(p);0<h.i.length&&ai(h)}else mt[0]!="stop"&&mt[0]!="close"||Mn(h,7);else h.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Mn(h,7):jo(h):mt[0]!="noop"&&h.l&&h.l.ta(mt),h.v=0)}}zr(4)}catch{}}var Mp=class{constructor(o,u){this.g=o,this.map=u}};function tu(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function nu(o){return o.h?1:o.g?o.g.size:0}function Lo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Uo(o,u){o.g?o.g.add(u):o.h=u}function ru(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}tu.prototype.cancel=function(){if(this.i=su(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function su(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return F(o.i)}function Fp(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,p=0;p<h;p++)u.push(o[p]);return u}u=[],h=0;for(p in o)u[h++]=o[p];return u}function Lp(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const p in o)u[h++]=p;return u}}}function iu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Lp(o),p=Fp(o),R=p.length,C=0;C<R;C++)u.call(void 0,p[C],h&&h[C],o)}var ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Up(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),R=null;if(0<=p){var C=o[h].substring(0,p);R=o[h].substring(p+1)}else C=o[h];u(C,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function kn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof kn){this.h=o.h,ti(this,o.j),this.o=o.o,this.g=o.g,ei(this,o.s),this.l=o.l;var u=o.i,h=new Xr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),au(this,h),this.m=o.m}else o&&(u=String(o).match(ou))?(this.h=!1,ti(this,u[1]||"",!0),this.o=Qr(u[2]||""),this.g=Qr(u[3]||"",!0),ei(this,u[4]),this.l=Qr(u[5]||"",!0),au(this,u[6]||"",!0),this.m=Qr(u[7]||"")):(this.h=!1,this.i=new Xr(null,this.h))}kn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Jr(u,lu,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Jr(u,lu,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Jr(h,h.charAt(0)=="/"?$p:jp,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Jr(h,Hp)),o.join("")};function Ke(o){return new kn(o)}function ti(o,u,h){o.j=h?Qr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ei(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function au(o,u,h){u instanceof Xr?(o.i=u,zp(o.i,o.h)):(h||(u=Jr(u,qp)),o.i=new Xr(u,o.h))}function St(o,u,h){o.i.set(u,h)}function ni(o){return St(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Qr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Jr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Bp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Bp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var lu=/[#\/\?@]/g,jp=/[#\?:]/g,$p=/[#\?]/g,qp=/[#\?@]/g,Hp=/#/g;function Xr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function ln(o){o.g||(o.g=new Map,o.h=0,o.i&&Up(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=Xr.prototype,e.add=function(o,u){ln(this),this.i=null,o=ir(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function uu(o,u){ln(o),u=ir(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function cu(o,u){return ln(o),u=ir(o,u),o.g.has(u)}e.forEach=function(o,u){ln(this),this.g.forEach(function(h,p){h.forEach(function(R){o.call(u,R,p,this)},this)},this)},e.na=function(){ln(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){const R=o[p];for(let C=0;C<R.length;C++)h.push(u[p])}return h},e.V=function(o){ln(this);let u=[];if(typeof o=="string")cu(this,o)&&(u=u.concat(this.g.get(ir(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return ln(this),this.i=null,o=ir(this,o),cu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function hu(o,u,h){uu(o,u),0<h.length&&(o.i=null,o.g.set(ir(o,u),F(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];const C=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var R=C;j[p]!==""&&(R+="="+encodeURIComponent(String(j[p]))),o.push(R)}}return this.i=o.join("&")};function ir(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function zp(o,u){u&&!o.j&&(ln(o),o.i=null,o.g.forEach(function(h,p){var R=p.toLowerCase();p!=R&&(uu(this,p),hu(this,R,h))},o)),o.j=u}function Kp(o,u){const h=new Wr;if(l.Image){const p=new Image;p.onload=b(un,h,"TestLoadImage: loaded",!0,u,p),p.onerror=b(un,h,"TestLoadImage: error",!1,u,p),p.onabort=b(un,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=b(un,h,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function Wp(o,u){const h=new Wr,p=new AbortController,R=setTimeout(()=>{p.abort(),un(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(R),C.ok?un(h,"TestPingServer: ok",!0,u):un(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),un(h,"TestPingServer: error",!1,u)})}function un(o,u,h,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(h)}catch{}}function Gp(){this.g=new Qs}function Qp(o,u,h){const p=h||"";try{iu(o,function(R,C){let j=R;f(R)&&(j=Gt(R)),u.push(p+C+"="+encodeURIComponent(j))})}catch(R){throw u.push(p+"type="+encodeURIComponent("_badmap")),R}}function ri(o){this.l=o.Ub||null,this.j=o.eb||!1}V(ri,rr),ri.prototype.g=function(){return new si(this.l,this.j)},ri.prototype.i=(function(o){return function(){return o}})({});function si(o,u){Z.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(si,Z),e=si.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Zr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function fu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Yr(this):Zr(this),this.readyState==3&&fu(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Yr(this))},e.Qa=function(o){this.g&&(this.response=o,Yr(this))},e.ga=function(){this.g&&Yr(this)};function Yr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Zr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function Zr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function du(o){let u="";return vt(o,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function Bo(o,u,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=du(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):St(o,u,h))}function xt(o){Z.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(xt,Z);var Jp=/^https?$/i,Xp=["POST","PUT"];e=xt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():No.g(),this.v=this.o?$l(this.o):$l(No),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(C){pu(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)h.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Xp,u,void 0))||p||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_u(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){pu(this,C)}};function pu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,mu(o),ii(o)}function mu(o){o.A||(o.A=!0,ot(o,"complete"),ot(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ot(this,"complete"),ot(this,"abort"),ii(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),xt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?gu(this):this.bb())},e.bb=function(){gu(this)};function gu(o){if(o.h&&typeof a<"u"&&(!o.v[1]||We(o)!=4||o.Z()!=2)){if(o.u&&We(o)==4)Kt(o.Ea,0,o);else if(ot(o,"readystatechange"),We(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var p;if(p=j===0){var R=String(o.D).match(ou)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),p=!Jp.test(R?R.toLowerCase():"")}h=p}if(h)ot(o,"complete"),ot(o,"success");else{o.m=6;try{var C=2<We(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",mu(o)}}finally{ii(o)}}}}function ii(o,u){if(o.g){_u(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ot(o,"ready");try{h.onreadystatechange=p}catch{}}}function _u(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function We(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<We(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Te(u)}};function yu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Yp(o){const u={};o=(o.g&&2<=We(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(W(o[p]))continue;var h=w(o[p]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=u[R]||[];u[R]=C,C.push(h)}I(u,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function vu(o){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ts("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ts("baseRetryDelayMs",5e3,o),this.cb=ts("retryDelaySeedMs",1e4,o),this.Wa=ts("forwardChannelMaxRetries",2,o),this.wa=ts("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new tu(o&&o.concurrentRequestLimit),this.Da=new Gp,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=vu.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,p){fe(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Cu(this,null,this.W),ai(this)};function jo(o){if(Eu(o),o.G==3){var u=o.U++,h=Ke(o.I);if(St(h,"SID",o.K),St(h,"RID",u),St(h,"TYPE","terminate"),es(o,h),u=new an(o,o.j,u),u.L=2,u.v=ni(Ke(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Pu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Zs(u)}Ru(o)}function oi(o){o.g&&(qo(o),o.g.cancel(),o.g=null)}function Eu(o){oi(o),o.u&&(l.clearTimeout(o.u),o.u=null),li(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ai(o){if(!eu(o.h)&&!o.s){o.s=!0;var u=o.Ga;it||Vn(),pt||(it(),pt=!0),be.add(u,o),o.B=0}}function Zp(o,u){return nu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Kr(v(o.Ga,o,u),Su(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new an(this,this.j,o);let C=this.o;if(this.S&&(C?(C=g(C),T(C,this.S)):C=this.S),this.m!==null||this.O||(R.H=C,C=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=Iu(this,R,u),h=Ke(this.I),St(h,"RID",o),St(h,"CVER",22),this.D&&St(h,"X-HTTP-Session-Id",this.D),es(this,h),C&&(this.O?u="headers="+encodeURIComponent(String(du(C)))+"&"+u:this.m&&Bo(h,this.m,C)),Uo(this.h,R),this.Ua&&St(h,"TYPE","init"),this.P?(St(h,"$req",u),St(h,"SID","null"),R.T=!0,ko(R,h,null)):ko(R,h,u),this.G=2}}else this.G==3&&(o?Tu(this,o):this.i.length==0||eu(this.h)||Tu(this))};function Tu(o,u){var h;u?h=u.l:h=o.U++;const p=Ke(o.I);St(p,"SID",o.K),St(p,"RID",h),St(p,"AID",o.T),es(o,p),o.m&&o.o&&Bo(p,o.m,o.o),h=new an(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Iu(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Uo(o.h,h),ko(h,p,u)}function es(o,u){o.H&&vt(o.H,function(h,p){St(u,p,h)}),o.l&&iu({},function(h,p){St(u,p,h)})}function Iu(o,u,h){h=Math.min(o.i.length,h);var p=o.l?v(o.l.Na,o.l,o):null;t:{var R=o.i;let C=-1;for(;;){const j=["count="+h];C==-1?0<h?(C=R[0].g,j.push("ofs="+C)):C=0:j.push("ofs="+C);let Et=!0;for(let Qt=0;Qt<h;Qt++){let mt=R[Qt].g;const ne=R[Qt].map;if(mt-=C,0>mt)C=Math.max(0,R[Qt].g-100),Et=!1;else try{Qp(ne,j,"req"+mt+"_")}catch{p&&p(ne)}}if(Et){p=j.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,p}function wu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;it||Vn(),pt||(it(),pt=!0),be.add(u,o),o.v=0}}function $o(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Kr(v(o.Fa,o),Su(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Kr(v(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fe(10),oi(this),Au(this))};function qo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Au(o){o.g=new an(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ke(o.qa);St(u,"RID","rpc"),St(u,"SID",o.K),St(u,"AID",o.T),St(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&St(u,"TO",o.ja),St(u,"TYPE","xmlhttp"),es(o,u),o.m&&o.o&&Bo(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=ni(Ke(u)),h.m=null,h.P=!0,Xl(h,o)}e.Za=function(){this.C!=null&&(this.C=null,oi(this),$o(this),fe(19))};function li(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function bu(o,u){var h=null;if(o.g==u){li(o),qo(o),o.g=null;var p=2}else if(Lo(o.h,u))h=u.D,ru(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var R=o.B;p=Js(),ot(p,new Wl(p,h)),ai(o)}else wu(o);else if(R=u.s,R==3||R==0&&0<u.X||!(p==1&&Zp(o,u)||p==2&&$o(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),R){case 1:Mn(o,5);break;case 4:Mn(o,10);break;case 3:Mn(o,6);break;default:Mn(o,2)}}}function Su(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Mn(o,u){if(o.j.info("Error code "+u),u==2){var h=v(o.fb,o),p=o.Xa;const R=!p;p=new kn(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ti(p,"https"),ni(p),R?Kp(p.toString(),h):Wp(p.toString(),h)}else fe(2);o.G=0,o.l&&o.l.sa(u),Ru(o),Eu(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Ru(o){if(o.G=0,o.ka=[],o.l){const u=su(o.h);(u.length!=0||o.i.length!=0)&&(L(o.ka,u),L(o.ka,o.i),o.h.i.length=0,F(o.i),o.i.length=0),o.l.ra()}}function Cu(o,u,h){var p=h instanceof kn?Ke(h):new kn(h);if(p.g!="")u&&(p.g=u+"."+p.g),ei(p,p.s);else{var R=l.location;p=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;var C=new kn(null);p&&ti(C,p),u&&(C.g=u),R&&ei(C,R),h&&(C.l=h),p=C}return h=o.D,u=o.ya,h&&u&&St(p,h,u),St(p,"VER",o.la),es(o,p),p}function Pu(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new xt(new ri({eb:h})):new xt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vu(){}e=Vu.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ui(){}ui.prototype.g=function(o,u){return new _e(o,u)};function _e(o,u){Z.call(this),this.g=new vu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!W(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!W(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new or(this)}V(_e,Z),_e.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_e.prototype.close=function(){jo(this.g)},_e.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Gt(o),o=h);u.i.push(new Mp(u.Ya++,o)),u.G==3&&ai(u)},_e.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,_e.aa.N.call(this)};function Du(o){Do.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(Du,Do);function xu(){xo.call(this),this.status=1}V(xu,xo);function or(o){this.g=o}V(or,Vu),or.prototype.ua=function(){ot(this.g,"a")},or.prototype.ta=function(o){ot(this.g,new Du(o))},or.prototype.sa=function(o){ot(this.g,new xu)},or.prototype.ra=function(){ot(this.g,"b")},ui.prototype.createWebChannel=ui.prototype.g,_e.prototype.send=_e.prototype.o,_e.prototype.open=_e.prototype.m,_e.prototype.close=_e.prototype.close,sd=function(){return new ui},rd=function(){return Js()},nd=Nn,Ca={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xs.NO_ERROR=0,Xs.TIMEOUT=8,Xs.HTTP_ERROR=6,bi=Xs,Gl.COMPLETE="complete",ed=Gl,ql.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Z.prototype.listen=Z.prototype.K,ls=ql,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,td=xt}).apply(typeof pi<"u"?pi:typeof self<"u"?self:typeof window<"u"?window:{});const Cc="@firebase/firestore",Pc="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fr="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Wf("@firebase/firestore");function pr(){return Qn.logLevel}function H(e,...t){if(Qn.logLevel<=dt.DEBUG){const n=t.map(pl);Qn.debug(`Firestore (${Fr}): ${e}`,...n)}}function nn(e,...t){if(Qn.logLevel<=dt.ERROR){const n=t.map(pl);Qn.error(`Firestore (${Fr}): ${e}`,...n)}}function wn(e,...t){if(Qn.logLevel<=dt.WARN){const n=t.map(pl);Qn.warn(`Firestore (${Fr}): ${e}`,...n)}}function pl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,id(e,r,n)}function id(e,t,n){let r=`FIRESTORE (${Fr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw nn(r),new Error(r)}function yt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||id(t,s,r)}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Mr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class qv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(oe.UNAUTHENTICATED)))}shutdown(){}}class Hv{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class zv{constructor(t){this.t=t,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Kn,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=i;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Kn)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new od(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new oe(t)}}class Kv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=oe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Wv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Kv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(oe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gv{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vc(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vc(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Qv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ut(e,t){return e<t?-1:e>t?1:0}function Pa(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const i=ad(),a=Jv(i.encode(Dc(e,n)),i.encode(Dc(t,n)));return a!==0?a:ut(r,s)}}n+=r>65535?2:1}return ut(e.length,t.length)}function Dc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Jv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ut(e[n],t[n]);return ut(e.length,t.length)}function Vr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="__name__";class Oe{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Oe.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Oe?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Oe.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ut(t.length,n.length)}static compareSegments(t,n){const r=Oe.isNumericId(t),s=Oe.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Oe.extractNumericId(t).compare(Oe.extractNumericId(n)):Pa(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vn.fromString(t.substring(4,t.length-2))}}class Rt extends Oe{construct(t,n,r){return new Rt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Q(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Rt(n)}static emptyPath(){return new Rt([])}}const Xv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Oe{construct(t,n,r){return new Zt(t,n,r)}static isValidIdentifier(t){return Xv.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xc}static keyField(){return new Zt([xc])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(N.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Q(N.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Q(N.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.path=t}static fromPath(t){return new X(Rt.fromString(t))}static fromName(t){return new X(Rt.fromString(t).popFirst(5))}static empty(){return new X(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Rt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new X(new Rt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(e,t,n){if(!n)throw new Q(N.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Yv(e,t,n,r){if(t===!0&&r===!0)throw new Q(N.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Nc(e){if(!X.isDocumentKey(e))throw new Q(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Oc(e){if(X.isDocumentKey(e))throw new Q(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ud(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function gl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function br(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Q(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gl(e);throw new Q(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(e,t){const n={typeString:e};return t&&(n.value=t),n}function qs(e,t){if(!ud(e))throw new Q(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(N.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-62135596800,Mc=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(t){return Ct.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Mc);return new Ct(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<kc)throw new Q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mc}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(qs(t,Ct._jsonSchema))return new Ct(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-kc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Lt("string",Ct._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(t){return new rt(t)}static min(){return new rt(new Ct(0,0))}static max(){return new rt(new Ct(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=-1;function Zv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=rt.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new An(s,X.empty(),t)}function tE(e){return new An(e.readTime,e.key,Ns)}class An{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new An(rt.min(),X.empty(),Ns)}static max(){return new An(rt.max(),X.empty(),Ns)}}function eE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=X.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(e){if(e.code!==N.FAILED_PRECONDITION||e.message!==nE)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new D(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):D.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):D.reject(n)}static resolve(t){return new D(((n,r)=>{n(t)}))}static reject(t){return new D(((n,r)=>{r(t)}))}static waitFor(t){return new D(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(c=>r(c)))})),a=!0,i===s&&n()}))}static or(t){let n=D.resolve(!1);for(const r of t)n=n.next((s=>s?D.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new D(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new D(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function sE(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ur(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}go.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=-1;function _o(e){return e==null}function zi(e){return e===0&&1/e==-1/0}function iE(e){return typeof e=="number"&&Number.isInteger(e)&&!zi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="";function oE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fc(t)),t=aE(e.get(n),t);return Fc(t)}function aE(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case cd:n+="";break;default:n+=i}}return n}function Fc(e){return e+cd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Zn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n){this.comparator=t,this.root=n||Jt.EMPTY}insert(t,n){return new Dt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(t){return new Dt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mi(this.root,t,this.comparator,!1)}getReverseIterator(){return new mi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mi(this.root,t,this.comparator,!0)}}class mi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Jt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Jt.RED,this.left=s??Jt.EMPTY,this.right=i??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Jt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Jt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new Dt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uc(this.data.getIterator())}getIteratorFrom(t){return new Uc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ht(this.comparator);return n.data=t,n}}class Uc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.fields=t,t.sort(Zt.comparator)}static empty(){return new Re([])}unionWith(t){let n=new Ht(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Re(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Vr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fd("Invalid base64 string: "+i):i}})(t);return new te(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new te(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}te.EMPTY_BYTE_STRING=new te("");const lE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(e){if(yt(!!e,39018),typeof e=="string"){let t=0;const n=lE.exec(e);if(yt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Sn(e){return typeof e=="string"?te.fromBase64String(e):te.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="server_timestamp",pd="__type__",md="__previous_value__",gd="__local_write_time__";function yl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[pd])===null||n===void 0?void 0:n.stringValue)===dd}function yo(e){const t=e.mapValue.fields[md];return yl(t)?yo(t):t}function Os(e){const t=bn(e.mapValue.fields[gd].timestampValue);return new Ct(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Ki="(default)";class ks{constructor(t,n){this.projectId=t,this.database=n||Ki}static empty(){return new ks("","")}get isDefaultDatabase(){return this.database===Ki}isEqual(t){return t instanceof ks&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="__type__",cE="__max__",gi={mapValue:{}},yd="__vector__",Wi="value";function Rn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yl(e)?4:fE(e)?9007199254740991:hE(e)?10:11:tt(28295,{value:e})}function $e(e,t){if(e===t)return!0;const n=Rn(e);if(n!==Rn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Os(e).isEqual(Os(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=bn(s.timestampValue),l=bn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Sn(s.bytesValue).isEqual(Sn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Ot(s.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ot(s.integerValue)===Ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ot(s.doubleValue),l=Ot(i.doubleValue);return a===l?zi(a)===zi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Vr(e.arrayValue.values||[],t.arrayValue.values||[],$e);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Lc(a)!==Lc(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!$e(a[c],l[c])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function Ms(e,t){return(e.values||[]).find((n=>$e(n,t)))!==void 0}function Dr(e,t){if(e===t)return 0;const n=Rn(e),r=Rn(t);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Ot(i.integerValue||i.doubleValue),c=Ot(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(e,t);case 3:return Bc(e.timestampValue,t.timestampValue);case 4:return Bc(Os(e),Os(t));case 5:return Pa(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Sn(i),c=Sn(a);return l.compareTo(c)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ut(l[f],c[f]);if(d!==0)return d}return ut(l.length,c.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=ut(Ot(i.latitude),Ot(a.latitude));return l!==0?l:ut(Ot(i.longitude),Ot(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return jc(e.arrayValue,t.arrayValue);case 10:return(function(i,a){var l,c,f,d;const m=i.fields||{},v=a.fields||{},b=(l=m[Wi])===null||l===void 0?void 0:l.arrayValue,V=(c=v[Wi])===null||c===void 0?void 0:c.arrayValue,F=ut(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return F!==0?F:jc(b,V)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===gi.mapValue&&a===gi.mapValue)return 0;if(i===gi.mapValue)return 1;if(a===gi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const v=Pa(c[m],d[m]);if(v!==0)return v;const b=Dr(l[c[m]],f[d[m]]);if(b!==0)return b}return ut(c.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{le:n})}}function Bc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=bn(e),r=bn(t),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function jc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Dr(n[s],r[s]);if(i)return i}return ut(n.length,r.length)}function xr(e){return Va(e)}function Va(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=bn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Sn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return X.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Va(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Va(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function Si(e){switch(Rn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yo(e);return t?16+Si(t):16;case 5:return 2*e.stringValue.length;case 6:return Sn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Si(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return Zn(r.fields,((i,a)=>{s+=i.length+Si(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function Da(e){return!!e&&"integerValue"in e}function vl(e){return!!e&&"arrayValue"in e}function $c(e){return!!e&&"nullValue"in e}function qc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ri(e){return!!e&&"mapValue"in e}function hE(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[_d])===null||n===void 0?void 0:n.stringValue)===yd}function Is(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Zn(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Is(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Is(e.arrayValue.values[n]);return t}return Object.assign({},e)}function fE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===cE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.value=t}static empty(){return new Ie({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ri(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Is(n)}setAll(t){let n=Zt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Is(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ri(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return $e(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ri(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Zn(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ie(Is(this.value))}}function vd(e){const t=[];return Zn(e.fields,((n,r)=>{const s=new Zt([n]);if(Ri(r)){const i=vd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Re(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new le(t,0,rt.min(),rt.min(),rt.min(),Ie.empty(),0)}static newFoundDocument(t,n,r,s){return new le(t,1,n,rt.min(),r,s,0)}static newNoDocument(t,n){return new le(t,2,n,rt.min(),rt.min(),Ie.empty(),0)}static newUnknownDocument(t,n){return new le(t,3,n,rt.min(),rt.min(),Ie.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof le&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new le(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,n){this.position=t,this.inclusive=n}}function Hc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),n.key):r=Dr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function zc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$e(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t,n="asc"){this.field=t,this.dir=n}}function dE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{}class $t extends Ed{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new mE(t,n,r):n==="array-contains"?new yE(t,r):n==="in"?new vE(t,r):n==="not-in"?new EE(t,r):n==="array-contains-any"?new TE(t,r):new $t(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new gE(t,r):new _E(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Dr(n,this.value)):n!==null&&Rn(this.value)===Rn(n)&&this.matchesComparison(Dr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends Ed{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new qe(t,n)}matches(t){return Td(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Td(e){return e.op==="and"}function Id(e){return pE(e)&&Td(e)}function pE(e){for(const t of e.filters)if(t instanceof qe)return!1;return!0}function xa(e){if(e instanceof $t)return e.field.canonicalString()+e.op.toString()+xr(e.value);if(Id(e))return e.filters.map((t=>xa(t))).join(",");{const t=e.filters.map((n=>xa(n))).join(",");return`${e.op}(${t})`}}function wd(e,t){return e instanceof $t?(function(r,s){return s instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&$e(r.value,s.value)})(e,t):e instanceof qe?(function(r,s){return s instanceof qe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&wd(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function Ad(e){return e instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${xr(n.value)}`})(e):e instanceof qe?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ad).join(" ,")+"}"})(e):"Filter"}class mE extends $t{constructor(t,n,r){super(t,n,r),this.key=X.fromName(r.referenceValue)}matches(t){const n=X.comparator(t.key,this.key);return this.matchesComparison(n)}}class gE extends $t{constructor(t,n){super(t,"in",n),this.keys=bd("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class _E extends $t{constructor(t,n){super(t,"not-in",n),this.keys=bd("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function bd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>X.fromName(r.referenceValue)))}class yE extends $t{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vl(n)&&Ms(n.arrayValue,this.value)}}class vE extends $t{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ms(this.value.arrayValue,n)}}class EE extends $t{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ms(this.value.arrayValue,n)}}class TE extends $t{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ms(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Kc(e,t=null,n=[],r=[],s=null,i=null,a=null){return new IE(e,t,n,r,s,i,a)}function El(e){const t=st(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>xa(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),_o(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>xr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>xr(r))).join(",")),t.Pe=n}return t.Pe}function Tl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zc(e.startAt,t.startAt)&&zc(e.endAt,t.endAt)}function Na(e){return X.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function wE(e,t,n,r,s,i,a,l){return new vo(e,t,n,r,s,i,a,l)}function Il(e){return new vo(e)}function Wc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function AE(e){return e.collectionGroup!==null}function ws(e){const t=st(e);if(t.Te===null){t.Te=[];const n=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ht(Zt.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Te.push(new Qi(i,r))})),n.has(Zt.keyField().canonicalString())||t.Te.push(new Qi(Zt.keyField(),r))}return t.Te}function Fe(e){const t=st(e);return t.Ie||(t.Ie=bE(t,ws(e))),t.Ie}function bE(e,t){if(e.limitType==="F")return Kc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Qi(s.field,i)}));const n=e.endAt?new Gi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gi(e.startAt.position,e.startAt.inclusive):null;return Kc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Oa(e,t,n){return new vo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Eo(e,t){return Tl(Fe(e),Fe(t))&&e.limitType===t.limitType}function Sd(e){return`${El(Fe(e))}|lt:${e.limitType}`}function mr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Ad(s))).join(", ")}]`),_o(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>xr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>xr(s))).join(",")),`Target(${r})`})(Fe(e))}; limitType=${e.limitType})`}function To(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of ws(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,c){const f=Hc(a,l,c);return a.inclusive?f<=0:f<0})(r.startAt,ws(r),s)||r.endAt&&!(function(a,l,c){const f=Hc(a,l,c);return a.inclusive?f>=0:f>0})(r.endAt,ws(r),s))})(e,t)}function SE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rd(e){return(t,n)=>{let r=!1;for(const s of ws(e)){const i=RE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function RE(e,t,n){const r=e.field.isKeyField()?X.comparator(t.key,n.key):(function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?Dr(c,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Zn(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return hd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Dt(X.comparator);function rn(){return CE}const Cd=new Dt(X.comparator);function us(...e){let t=Cd;for(const n of e)t=t.insert(n.key,n);return t}function Pd(e){let t=Cd;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function qn(){return As()}function Vd(){return As()}function As(){return new tr((e=>e.toString()),((e,t)=>e.isEqual(t)))}const PE=new Dt(X.comparator),VE=new Ht(X.comparator);function ct(...e){let t=VE;for(const n of e)t=t.add(n);return t}const DE=new Ht(ut);function xE(){return DE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zi(t)?"-0":t}}function Dd(e){return{integerValue:""+e}}function NE(e,t){return iE(t)?Dd(t):wl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this._=void 0}}function OE(e,t,n){return e instanceof Ji?(function(s,i){const a={fields:{[pd]:{stringValue:dd},[gd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&yl(i)&&(i=yo(i)),i&&(a.fields[md]=i),{mapValue:a}})(n,t):e instanceof Fs?Nd(e,t):e instanceof Ls?Od(e,t):(function(s,i){const a=xd(s,i),l=Gc(a)+Gc(s.Ee);return Da(a)&&Da(s.Ee)?Dd(l):wl(s.serializer,l)})(e,t)}function kE(e,t,n){return e instanceof Fs?Nd(e,t):e instanceof Ls?Od(e,t):n}function xd(e,t){return e instanceof Xi?(function(r){return Da(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Ji extends Io{}class Fs extends Io{constructor(t){super(),this.elements=t}}function Nd(e,t){const n=kd(t);for(const r of e.elements)n.some((s=>$e(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ls extends Io{constructor(t){super(),this.elements=t}}function Od(e,t){let n=kd(t);for(const r of e.elements)n=n.filter((s=>!$e(s,r)));return{arrayValue:{values:n}}}class Xi extends Io{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function Gc(e){return Ot(e.integerValue||e.doubleValue)}function kd(e){return vl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function ME(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Fs&&s instanceof Fs||r instanceof Ls&&s instanceof Ls?Vr(r.elements,s.elements,$e):r instanceof Xi&&s instanceof Xi?$e(r.Ee,s.Ee):r instanceof Ji&&s instanceof Ji})(e.transform,t.transform)}class FE{constructor(t,n){this.version=t,this.transformResults=n}}class Ye{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ye}static exists(t){return new Ye(void 0,t)}static updateTime(t){return new Ye(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ci(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class wo{}function Md(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ld(e.key,Ye.none()):new Hs(e.key,e.data,Ye.none());{const n=e.data,r=Ie.empty();let s=new Ht(Zt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new er(e.key,r,new Re(s.toArray()),Ye.none())}}function LE(e,t,n){e instanceof Hs?(function(s,i,a){const l=s.value.clone(),c=Jc(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof er?(function(s,i,a){if(!Ci(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Jc(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Fd(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function bs(e,t,n,r){return e instanceof Hs?(function(i,a,l,c){if(!Ci(i.precondition,a))return l;const f=i.value.clone(),d=Xc(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof er?(function(i,a,l,c){if(!Ci(i.precondition,a))return l;const f=Xc(i.fieldTransforms,c,a),d=a.data;return d.setAll(Fd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(e,t,n,r):(function(i,a,l){return Ci(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function UE(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=xd(r.transform,s||null);i!=null&&(n===null&&(n=Ie.empty()),n.set(r.field,i))}return n||null}function Qc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Vr(r,s,((i,a)=>ME(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hs extends wo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class er extends wo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Jc(e,t,n){const r=new Map;yt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,kE(a,l,n[s]))}return r}function Xc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,OE(i,a,t))}return r}class Ld extends wo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BE extends wo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&LE(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=bs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=bs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Vd();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=Md(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ct())}isEqual(t){return this.batchId===t.batchId&&Vr(this.mutations,t.mutations,((n,r)=>Qc(n,r)))&&Vr(this.baseMutations,t.baseMutations,((n,r)=>Qc(n,r)))}}class Al{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){yt(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let s=(function(){return PE})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Al(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,ft;function HE(e){switch(e){case N.OK:return tt(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function Ud(e){if(e===void 0)return nn("GRPC error has no .code"),N.UNKNOWN;switch(e){case Ft.OK:return N.OK;case Ft.CANCELLED:return N.CANCELLED;case Ft.UNKNOWN:return N.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return N.INTERNAL;case Ft.UNAVAILABLE:return N.UNAVAILABLE;case Ft.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ft.NOT_FOUND:return N.NOT_FOUND;case Ft.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ft.ABORTED:return N.ABORTED;case Ft.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ft.DATA_LOSS:return N.DATA_LOSS;default:return tt(39323,{code:e})}}(ft=Ft||(Ft={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new vn([4294967295,4294967295],0);function Yc(e){const t=ad().encode(e),n=new Zf;return n.update(t),new Uint8Array(n.digest())}function Zc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new vn([n,r],0),new vn([s,i],0)]}class bl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cs(`Invalid padding: ${n}`);if(r<0)throw new cs(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new cs(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new cs(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=vn.fromNumber(this.fe)}pe(t,n,r){let s=t.add(n.multiply(vn.fromNumber(r)));return s.compare(zE)===1&&(s=new vn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=Yc(t),[r,s]=Zc(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);if(!this.ye(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new bl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.fe===0)return;const n=Yc(t),[r,s]=Zc(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);this.we(a)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class cs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,zs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Ao(rt.min(),s,new Dt(ut),rn(),ct())}}class zs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new zs(r,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t,n,r,s){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=s}}class Bd{constructor(t,n){this.targetId=t,this.De=n}}class jd{constructor(t,n,r=te.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class th{constructor(){this.ve=0,this.Ce=eh(),this.Fe=te.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=ct(),n=ct(),r=ct();return this.Ce.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new zs(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=eh()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class KE{constructor(t){this.We=t,this.Ge=new Map,this.ze=rn(),this.je=_i(),this.Je=_i(),this.He=new Dt(ut)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,(n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(t){const n=t.targetId,r=t.De.count,s=this.st(n);if(s){const i=s.target;if(Na(i))if(r===0){const a=new X(i.path);this.Xe(n,a,le.newNoDocument(a,rt.min()))}else yt(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(t),c=l?this.ut(l,t,a):1;if(c!==0){this.rt(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Sn(r).toUint8Array()}catch(c){if(c instanceof fd)return wn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new bl(a,s,i)}catch(c){return wn(c instanceof cs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.Xe(n,i,null),s++)})),s}Pt(t){const n=new Map;this.Ge.forEach(((i,a)=>{const l=this.st(a);if(l){if(i.current&&Na(l.target)){const c=new X(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,le.newNoDocument(c,t))}i.Ne&&(n.set(a,i.Le()),i.ke())}}));let r=ct();this.Je.forEach(((i,a)=>{let l=!0;a.forEachWhile((c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.ze.forEach(((i,a)=>a.setReadTime(t)));const s=new Ao(t,n,this.He,this.ze,r);return this.ze=rn(),this.je=_i(),this.Je=_i(),this.He=new Dt(ut),s}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const s=this.tt(t);this.It(t,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new th,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Ht(ut),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Ht(ut),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new th),this.We.getRemoteKeysForTarget(t).forEach((n=>{this.Xe(t,n,null)}))}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function _i(){return new Dt(X.comparator)}function eh(){return new Dt(X.comparator)}const WE={asc:"ASCENDING",desc:"DESCENDING"},GE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QE={and:"AND",or:"OR"};class JE{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ka(e,t){return e.useProto3Json||_o(t)?t:{value:t}}function Yi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $d(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function XE(e,t){return Yi(e,t.toTimestamp())}function Le(e){return yt(!!e,49232),rt.fromTimestamp((function(n){const r=bn(n);return new Ct(r.seconds,r.nanos)})(e))}function Sl(e,t){return Ma(e,t).canonicalString()}function Ma(e,t){const n=(function(s){return new Rt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function qd(e){const t=Rt.fromString(e);return yt(Gd(t),10190,{key:t.toString()}),t}function Fa(e,t){return Sl(e.databaseId,t.path)}function aa(e,t){const n=qd(t);if(n.get(1)!==e.databaseId.projectId)throw new Q(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Q(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new X(zd(n))}function Hd(e,t){return Sl(e.databaseId,t)}function YE(e){const t=qd(e);return t.length===4?Rt.emptyPath():zd(t)}function La(e){return new Rt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zd(e){return yt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function nh(e,t,n){return{name:Fa(e,t),fields:n.value.mapValue.fields}}function ZE(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(yt(d===void 0||typeof d=="string",58123),te.fromBase64String(d||"")):(yt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),te.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?N.UNKNOWN:Ud(f.code);return new Q(d,f.message||"")})(a);n=new jd(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=aa(e,r.document.name),i=Le(r.document.updateTime),a=r.document.createTime?Le(r.document.createTime):rt.min(),l=new Ie({mapValue:{fields:r.document.fields}}),c=le.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Pi(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=aa(e,r.document),i=r.readTime?Le(r.readTime):rt.min(),a=le.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Pi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=aa(e,r.document),i=r.removedTargetIds||[];n=new Pi([],i,s,null)}else{if(!("filter"in t))return tt(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new qE(s,i),l=r.targetId;n=new Bd(l,a)}}return n}function tT(e,t){let n;if(t instanceof Hs)n={update:nh(e,t.key,t.value)};else if(t instanceof Ld)n={delete:Fa(e,t.key)};else if(t instanceof er)n={update:nh(e,t.key,t.data),updateMask:uT(t.fieldMask)};else{if(!(t instanceof BE))return tt(16599,{Rt:t.type});n={verify:Fa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Ji)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ls)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xi)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:XE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function eT(e,t){return e&&e.length>0?(yt(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Le(s.updateTime):Le(i);return a.isEqual(rt.min())&&(a=Le(i)),new FE(a,s.transformResults||[])})(n,t)))):[]}function nT(e,t){return{documents:[Hd(e,t.path)]}}function rT(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hd(e,s);const i=(function(f){if(f.length!==0)return Wd(qe.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(v){return{field:gr(v.field),direction:oT(v.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ka(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{Vt:n,parent:s}}function sT(e){let t=YE(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(m){const v=Kd(m);return v instanceof qe&&Id(v)?v.getFilters():[v]})(n.where));let a=[];n.orderBy&&(a=(function(m){return m.map((v=>(function(V){return new Qi(_r(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(m){let v;return v=typeof m=="object"?m.value:m,_o(v)?null:v})(n.limit));let c=null;n.startAt&&(c=(function(m){const v=!!m.before,b=m.values||[];return new Gi(b,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(m){const v=!m.before,b=m.values||[];return new Gi(b,v)})(n.endAt)),wE(t,s,a,i,l,"F",c,f)}function iT(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Kd(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_r(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_r(n.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_r(n.unaryFilter.field);return $t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_r(n.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return $t.create(_r(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return qe.create(n.compositeFilter.filters.map((r=>Kd(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function oT(e){return WE[e]}function aT(e){return GE[e]}function lT(e){return QE[e]}function gr(e){return{fieldPath:e.canonicalString()}}function _r(e){return Zt.fromServerFormat(e.fieldPath)}function Wd(e){return e instanceof $t?(function(n){if(n.op==="=="){if(qc(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if($c(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qc(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if($c(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:aT(n.op),value:n.value}}})(e):e instanceof qe?(function(n){const r=n.getFilters().map((s=>Wd(s)));return r.length===1?r[0]:{compositeFilter:{op:lT(n.op),filters:r}}})(e):tt(54877,{filter:e})}function uT(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Gd(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,n,r,s,i=rt.min(),a=rt.min(),l=te.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t){this.gt=t}}function hT(e){const t=sT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Oa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.Dn=new dT}addToCollectionParentIndex(t,n){return this.Dn.add(n),D.resolve()}getCollectionParents(t,n){return D.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return D.resolve()}deleteFieldIndex(t,n){return D.resolve()}deleteAllFieldIndexes(t){return D.resolve()}createTargetIndexes(t,n){return D.resolve()}getDocumentsMatchingTarget(t,n){return D.resolve(null)}getIndexType(t,n){return D.resolve(0)}getFieldIndexes(t,n){return D.resolve([])}getNextCollectionGroupToUpdate(t){return D.resolve(null)}getMinOffset(t,n){return D.resolve(An.min())}getMinOffsetFromCollectionGroup(t,n){return D.resolve(An.min())}updateCollectionGroup(t,n,r){return D.resolve()}updateIndexEntries(t,n){return D.resolve()}}class dT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ht(Rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ht(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qd=41943040;class ge{static withCacheSize(t){return new ge(t,ge.DEFAULT_COLLECTION_PERCENTILE,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ge.DEFAULT_COLLECTION_PERCENTILE=10,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ge.DEFAULT=new ge(Qd,ge.DEFAULT_COLLECTION_PERCENTILE,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ge.DISABLED=new ge(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Nr(0)}static ur(){return new Nr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="LruGarbageCollector",pT=1048576;function ih([e,t],[n,r]){const s=ut(e,n);return s===0?ut(t,r):s}class mT{constructor(t){this.Tr=t,this.buffer=new Ht(ih),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ih(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){H(sh,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ur(n)?H(sh,"Ignoring IndexedDB error during garbage collection: ",n):await Lr(n)}await this.Rr(3e5)}))}}class _T{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return D.resolve(go.ue);const r=new mT(n);return this.Vr.forEachTarget(t,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(t,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(rh)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rh):this.pr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s)))).next((m=>(r=m,l=Date.now(),this.removeTargets(t,r,n)))).next((m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,r)))).next((m=>(f=Date.now(),pr()<=dt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function yT(e,t){return new _T(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.changes=new tr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,le.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&bs(r.mutation,s,Re.empty(),Ct.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ct()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ct()){const s=qn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=us();return i.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=qn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ct())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=rn();const a=As(),l=(function(){return As()})();return n.forEach(((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof er)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),bs(d.mutation,f,d.mutation.getFieldMask(),Ct.now())):a.set(f.key,Re.empty())})),this.recalculateAndSaveOverlays(t,i).next((c=>(c.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>{var m;return l.set(f,new ET(d,(m=a.get(f))!==null&&m!==void 0?m:null))})),l)))}recalculateAndSaveOverlays(t,n){const r=As();let s=new Dt(((a,l)=>a-l)),i=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||Re.empty();d=l.applyToLocalView(f,d),r.set(c,d);const m=(s.get(l.batchId)||ct()).add(c);s=s.insert(l.batchId,m)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,m=Vd();d.forEach((v=>{if(!i.has(v)){const b=Md(n.get(v),r.get(v));b!==null&&m.set(v,b),i=i.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return D.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):AE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):D.resolve(qn());let l=Ns,c=i;return a.next((f=>D.forEach(f,((d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(t,d).next((v=>{c=c.insert(d,v)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,c,f,ct()))).next((d=>({batchId:l,changes:Pd(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new X(n)).next((r=>{let s=us();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=us();return this.indexManager.getCollectionParents(t,i).next((l=>D.forEach(l,(c=>{const f=(function(m,v){return new vo(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((m,v)=>{a=a.insert(m,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,le.newInvalidDocument(d)))}));let l=us();return a.forEach(((c,f)=>{const d=i.get(c);d!==void 0&&bs(d.mutation,f,Re.empty(),Ct.now()),To(n,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return D.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Le(s.createTime)}})(n)),D.resolve()}getNamedQuery(t,n){return D.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:hT(s.bundledQuery),readTime:Le(s.readTime)}})(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.overlays=new Dt(X.comparator),this.kr=new Map}getOverlay(t,n){return D.resolve(this.overlays.get(n))}getOverlays(t,n){const r=qn();return D.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.wt(t,n,i)})),D.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.kr.delete(r)),D.resolve()}getOverlaysForCollection(t,n,r){const s=qn(),i=n.length+1,a=new X(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return D.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Dt(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=qn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=qn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return D.resolve(l)}wt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new $E(n,r));let i=this.kr.get(n);i===void 0&&(i=ct(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.sessionToken=te.EMPTY_BYTE_STRING}getSessionToken(t){return D.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.qr=new Ht(zt.Qr),this.$r=new Ht(zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new zt(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Wr(new zt(t,n))}Gr(t,n){t.forEach((r=>this.removeReference(r,n)))}zr(t){const n=new X(new Rt([])),r=new zt(n,t),s=new zt(n,t+1),i=[];return this.$r.forEachInRange([r,s],(a=>{this.Wr(a),i.push(a.key)})),i}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new X(new Rt([])),r=new zt(n,t),s=new zt(n,t+1);let i=ct();return this.$r.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new zt(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class zt{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return X.comparator(t.key,n.key)||ut(t.Hr,n.Hr)}static Ur(t,n){return ut(t.Hr,n.Hr)||X.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ht(zt.Qr)}checkEmpty(t){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new zt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return D.resolve(a)}lookupMutationBatch(t,n){return D.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?_l:this.er-1)}getAllMutationBatches(t){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new zt(n,0),s=new zt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],(a=>{const l=this.Zr(a.Hr);i.push(l)})),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(ut);return n.forEach((s=>{const i=new zt(s,0),a=new zt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],(l=>{r=r.add(l.Hr)}))})),D.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const a=new zt(new X(i),0);let l=new Ht(ut);return this.Yr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Hr)),!0)}),a),D.resolve(this.ei(l))}ei(t){const n=[];return t.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){yt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return D.forEach(n.mutations,(s=>{const i=new zt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Yr=r}))}rr(t){}containsKey(t,n){const r=new zt(n,0),s=this.Yr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,D.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(t){this.ni=t,this.docs=(function(){return new Dt(X.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():le.newInvalidDocument(n))}getEntries(t,n){let r=rn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():le.newInvalidDocument(s))})),D.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=rn();const a=n.path,l=new X(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||eE(tE(d),r)<=0||(s.has(d.key)||To(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ri(t,n){return D.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new RT(this)}getSize(t){return D.resolve(this.size)}}class RT extends vT{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(t,s)):this.Or.removeEntry(r)})),D.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.persistence=t,this.ii=new tr((n=>El(n)),Tl),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.si=0,this.oi=new Rl,this.targetCount=0,this._i=Nr.ar()}forEachTarget(t,n){return this.ii.forEach(((r,s)=>n(s))),D.resolve()}getLastRemoteSnapshotVersion(t){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return D.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),D.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new Nr(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,D.resolve()}updateTargetData(t,n){return this.hr(n),D.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.ii.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),D.waitFor(i).next((()=>s))}getTargetCount(t){return D.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return D.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),D.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),D.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),D.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return D.resolve(r)}containsKey(t,n){return D.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(t,n){this.ai={},this.overlays={},this.ui=new go(0),this.ci=!1,this.ci=!0,this.li=new AT,this.referenceDelegate=t(this),this.hi=new CT(this),this.indexManager=new fT,this.remoteDocumentCache=(function(s){return new ST(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new cT(n),this.Ti=new IT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new wT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new bT(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new PT(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(t,n){return D.or(Object.values(this.ai).map((r=>()=>r.containsKey(t,n))))}}class PT extends rE{constructor(t){super(),this.currentSequenceNumber=t}}class Cl{constructor(t){this.persistence=t,this.Ai=new Rl,this.Ri=null}static Vi(t){return new Cl(t)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),D.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),D.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.mi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.mi,(r=>{const s=X.fromPath(r);return this.fi(t,s).next((i=>{i||n.removeEntry(s,rt.min())}))})).next((()=>(this.Ri=null,n.apply(t))))}updateLimboDocument(t,n){return this.fi(t,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(t){return 0}fi(t,n){return D.or([()=>D.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class Zi{constructor(t,n){this.persistence=t,this.gi=new tr((r=>oE(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=yT(this,n)}static Vi(t,n){return new Zi(t,n)}Ii(){}di(t){return D.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}yr(t){let n=0;return this.gr(t,(r=>{n++})).next((()=>n))}gr(t,n){return D.forEach(this.gi,((r,s)=>this.Sr(t,r,s).next((i=>i?D.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(t,(a=>this.Sr(t,a,n).next((l=>{l||(r++,i.removeEntry(a,rt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),D.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),D.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),D.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),D.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Si(t.data.value)),n}Sr(t,n,r){return D.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.gi.get(n);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=s}static Es(t,n){let r=ct(),s=ct();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Pl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return by()?8:sE(wy())>0?6:4})()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ps(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ys(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new VT;return this.ws(t,n,a).next((l=>{if(i.result=l,this.Rs)return this.Ss(t,n,a,l.size)}))})).next((()=>i.result))}Ss(t,n,r,s){return r.documentReadCount<this.Vs?(pr()<=dt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),D.resolve()):(pr()<=dt.DEBUG&&H("QueryEngine","Query:",mr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(pr()<=dt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fe(n))):D.resolve())}ps(t,n){if(Wc(n))return D.resolve(null);let r=Fe(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Oa(n,null,"F"),r=Fe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=ct(...i);return this.gs.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((c=>{const f=this.bs(n,l);return this.Ds(n,f,a,c.readTime)?this.ps(t,Oa(n,null,"F")):this.vs(t,f,n,c)}))))})))))}ys(t,n,r,s){return Wc(n)||s.isEqual(rt.min())?D.resolve(null):this.gs.getDocuments(t,r).next((i=>{const a=this.bs(n,i);return this.Ds(n,a,r,s)?D.resolve(null):(pr()<=dt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mr(n)),this.vs(t,a,n,Zv(s,Ns)).next((l=>l)))}))}bs(t,n){let r=new Ht(Rd(t));return n.forEach(((s,i)=>{To(t,i)&&(r=r.add(i))})),r}Ds(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(t,n,r){return pr()<=dt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",mr(n)),this.gs.getDocumentsMatchingQuery(t,n,An.min(),r)}vs(t,n,r,s){return this.gs.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl="LocalStore",xT=3e8;class NT{constructor(t,n,r,s){this.persistence=t,this.Cs=n,this.serializer=s,this.Fs=new Dt(ut),this.Ms=new tr((i=>El(i)),Tl),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Fs)))}}function OT(e,t,n,r){return new NT(e,t,n,r)}async function Xd(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let c=ct();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next((f=>({Bs:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function kT(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,d){const m=f.batch,v=m.keys();let b=D.resolve();return v.forEach((V=>{b=b.next((()=>d.getEntry(c,V))).next((F=>{const L=f.docVersions.get(V);yt(L!==null,48541),F.version.compareTo(L)<0&&(m.applyToRemoteDocument(F,f),F.isValidDocument()&&(F.setReadTime(f.commitVersion),d.addEntry(F)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(c,m)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=ct();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Yd(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.hi.getLastRemoteSnapshotVersion(n)))}function MT(e,t){const n=st(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];t.targetChanges.forEach(((d,m)=>{const v=s.get(m);if(!v)return;l.push(n.hi.removeMatchingKeys(i,d.removedDocuments,m).next((()=>n.hi.addMatchingKeys(i,d.addedDocuments,m))));let b=v.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?b=b.withResumeToken(te.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),s=s.insert(m,b),(function(F,L,K){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=xT?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(v,b,d)&&l.push(n.hi.updateTargetData(i,b))}));let c=rn(),f=ct();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(FT(i,a,t.documentUpdates).next((d=>{c=d.Ls,f=d.ks}))),!r.isEqual(rt.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next((m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return D.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,f))).next((()=>c))})).then((i=>(n.Fs=s,i)))}function FT(e,t,n){let r=ct(),s=ct();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=rn();return n.forEach(((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(rt.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):H(Vl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{Ls:a,ks:s}}))}function LT(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=_l),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function UT(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,t).next((i=>i?(s=i,D.resolve(s)):n.hi.allocateTargetId(r).next((a=>(s=new pn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r}))}async function Ua(e,t,n){const r=st(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Ur(a))throw a;H(Vl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function oh(e,t,n){const r=st(e);let s=rt.min(),i=ct();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,f,d){const m=st(c),v=m.Ms.get(d);return v!==void 0?D.resolve(m.Fs.get(v)):m.hi.getTargetData(f,d)})(r,a,Fe(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,t,n?s:rt.min(),n?i:ct()))).next((l=>(BT(r,SE(t),l),{documents:l,qs:i})))))}function BT(e,t,n){let r=e.xs.get(t)||rt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.xs.set(t,r)}class ah{constructor(){this.activeTargetIds=xE()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jT{constructor(){this.Fo=new ah,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new ah,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="ConnectivityMonitor";class uh{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){H(lh,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){H(lh,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yi=null;function Ba(){return yi===null?yi=(function(){return 268435456+Math.round(2147483648*Math.random())})():yi++,"0x"+yi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RestConnection",qT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HT{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ki?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(t,n,r,s,i){const a=Ba(),l=this.Go(t,n.toUriEncodedString());H(la,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:f}=new URL(l),d=fl(f);return this.jo(t,l,c,r,d).then((m=>(H(la,`Received RPC '${t}' ${a}: `,m),m)),(m=>{throw wn(la,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m}))}Jo(t,n,r,s,i,a){return this.Wo(t,n,r,s,i)}zo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}Go(t,n){const r=qT[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se="WebChannelConnection";class KT extends HT{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,s,i){const a=Ba();return new Promise(((l,c)=>{const f=new td;f.setWithCredentials(!0),f.listenOnce(ed.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case bi.NO_ERROR:const m=f.getResponseJson();H(se,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case bi.TIMEOUT:H(se,`RPC '${t}' ${a} timed out`),c(new Q(N.DEADLINE_EXCEEDED,"Request time out"));break;case bi.HTTP_ERROR:const v=f.getStatus();if(H(se,`RPC '${t}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const V=b==null?void 0:b.error;if(V&&V.status&&V.message){const F=(function(K){const W=K.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(W)>=0?W:N.UNKNOWN})(V.status);c(new Q(F,V.message))}else c(new Q(N.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Q(N.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:t,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{H(se,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(se,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}P_(t,n,r){const s=Ba(),i=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=sd(),l=rd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");H(se,`Creating RPC '${t}' stream ${s}: ${d}`,c);const m=a.createWebChannel(d,c);this.T_(m);let v=!1,b=!1;const V=new zT({Ho:L=>{b?H(se,`Not sending because RPC '${t}' stream ${s} is closed:`,L):(v||(H(se,`Opening RPC '${t}' stream ${s} transport.`),m.open(),v=!0),H(se,`RPC '${t}' stream ${s} sending:`,L),m.send(L))},Yo:()=>m.close()}),F=(L,K,W)=>{L.listen(K,(G=>{try{W(G)}catch(z){setTimeout((()=>{throw z}),0)}}))};return F(m,ls.EventType.OPEN,(()=>{b||(H(se,`RPC '${t}' stream ${s} transport opened.`),V.s_())})),F(m,ls.EventType.CLOSE,(()=>{b||(b=!0,H(se,`RPC '${t}' stream ${s} transport closed`),V.__(),this.I_(m))})),F(m,ls.EventType.ERROR,(L=>{b||(b=!0,wn(se,`RPC '${t}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),V.__(new Q(N.UNAVAILABLE,"The operation could not be completed")))})),F(m,ls.EventType.MESSAGE,(L=>{var K;if(!b){const W=L.data[0];yt(!!W,16349);const G=W,z=(G==null?void 0:G.error)||((K=G[0])===null||K===void 0?void 0:K.error);if(z){H(se,`RPC '${t}' stream ${s} received error:`,z);const lt=z.status;let vt=(function(_){const T=Ft[_];if(T!==void 0)return Ud(T)})(lt),I=z.message;vt===void 0&&(vt=N.INTERNAL,I="Unknown error status: "+lt+" with message "+z.message),b=!0,V.__(new Q(vt,I)),m.close()}else H(se,`RPC '${t}' stream ${s} received:`,W),V.a_(W)}})),F(l,nd.STAT_EVENT,(L=>{L.stat===Ca.PROXY?H(se,`RPC '${t}' stream ${s} detected buffering proxy`):L.stat===Ca.NOPROXY&&H(se,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((n=>n===t))}}function ua(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){return new JE(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="PersistentStream";class tp{constructor(t,n,r,s,i,a,l,c){this.Fi=t,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Zd(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{t((()=>{const s=new Q(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return H(ch,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget((()=>this.b_===t?n():(H(ch,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WT extends tp{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=ZE(this.serializer,t),r=(function(i){if(!("targetChange"in i))return rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?rt.min():a.readTime?Le(a.readTime):rt.min()})(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=La(this.serializer),n.addTarget=(function(i,a){let l;const c=a.target;if(l=Na(c)?{documents:nT(i,c)}:{query:rT(i,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=$d(i,a.resumeToken);const f=ka(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(rt.min())>0){l.readTime=Yi(i,a.snapshotVersion.toTimestamp());const f=ka(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=iT(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=La(this.serializer),n.removeTarget=t,this.k_(n)}}class GT extends tp{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=eT(t.writeResults,t.commitTime),r=Le(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=La(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>tT(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{}class JT extends QT{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Q(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(t,Ma(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(N.UNKNOWN,i.toString())}))}Jo(t,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Jo(t,Ma(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(N.UNKNOWN,a.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class XT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(nn(n),this._a=!1):H("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="RemoteStore";class YT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo((a=>{r.enqueueAndForget((async()=>{nr(this)&&(H(Jn,"Restarting streams for network reachability change."),await(async function(c){const f=st(c);f.Ia.add(4),await Ks(f),f.Aa.set("Unknown"),f.Ia.delete(4),await So(f)})(this))}))})),this.Aa=new XT(r,s)}}async function So(e){if(nr(e))for(const t of e.da)await t(!0)}async function Ks(e){for(const t of e.da)await t(!1)}function ep(e,t){const n=st(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Ol(n)?Nl(n):Br(n).x_()&&xl(n,t))}function Dl(e,t){const n=st(e),r=Br(n);n.Ta.delete(t),r.x_()&&np(n,t),n.Ta.size===0&&(r.x_()?r.B_():nr(n)&&n.Aa.set("Unknown"))}function xl(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Br(e).H_(t)}function np(e,t){e.Ra.$e(t),Br(e).Y_(t)}function Nl(e){e.Ra=new KE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Br(e).start(),e.Aa.aa()}function Ol(e){return nr(e)&&!Br(e).M_()&&e.Ta.size>0}function nr(e){return st(e).Ia.size===0}function rp(e){e.Ra=void 0}async function ZT(e){e.Aa.set("Online")}async function tI(e){e.Ta.forEach(((t,n)=>{xl(e,t)}))}async function eI(e,t){rp(e),Ol(e)?(e.Aa.la(t),Nl(e)):e.Aa.set("Unknown")}async function nI(e,t,n){if(e.Aa.set("Online"),t instanceof jd&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))})(e,t)}catch(r){H(Jn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await to(e,r)}else if(t instanceof Pi?e.Ra.Ye(t):t instanceof Bd?e.Ra.it(t):e.Ra.et(t),!n.isEqual(rt.min()))try{const r=await Yd(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ta.get(f);d&&i.Ta.set(f,d.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,f)=>{const d=i.Ta.get(c);if(!d)return;i.Ta.set(c,d.withResumeToken(te.EMPTY_BYTE_STRING,d.snapshotVersion)),np(i,c);const m=new pn(d.target,c,f,d.sequenceNumber);xl(i,m)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Jn,"Failed to raise snapshot:",r),await to(e,r)}}async function to(e,t,n){if(!Ur(t))throw t;e.Ia.add(1),await Ks(e),e.Aa.set("Offline"),n||(n=()=>Yd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Jn,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await So(e)}))}function sp(e,t){return t().catch((n=>to(e,n,t)))}async function Ro(e){const t=st(e),n=Cn(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:_l;for(;rI(t);)try{const s=await LT(t.localStore,r);if(s===null){t.Pa.length===0&&n.B_();break}r=s.batchId,sI(t,s)}catch(s){await to(t,s)}ip(t)&&op(t)}function rI(e){return nr(e)&&e.Pa.length<10}function sI(e,t){e.Pa.push(t);const n=Cn(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function ip(e){return nr(e)&&!Cn(e).M_()&&e.Pa.length>0}function op(e){Cn(e).start()}async function iI(e){Cn(e).na()}async function oI(e){const t=Cn(e);for(const n of e.Pa)t.X_(n.mutations)}async function aI(e,t,n){const r=e.Pa.shift(),s=Al.from(r,t,n);await sp(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Ro(e)}async function lI(e,t){t&&Cn(e).Z_&&await(async function(r,s){if((function(a){return HE(a)&&a!==N.ABORTED})(s.code)){const i=r.Pa.shift();Cn(r).N_(),await sp(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Ro(r)}})(e,t),ip(e)&&op(e)}async function hh(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H(Jn,"RemoteStore received new credentials");const r=nr(n);n.Ia.add(3),await Ks(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await So(n)}async function uI(e,t){const n=st(e);t?(n.Ia.delete(2),await So(n)):t||(n.Ia.add(2),await Ks(n),n.Aa.set("Unknown"))}function Br(e){return e.Va||(e.Va=(function(n,r,s){const i=st(n);return i.ia(),new WT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:ZT.bind(null,e),e_:tI.bind(null,e),n_:eI.bind(null,e),J_:nI.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),Ol(e)?Nl(e):e.Aa.set("Unknown")):(await e.Va.stop(),rp(e))}))),e.Va}function Cn(e){return e.ma||(e.ma=(function(n,r,s){const i=st(n);return i.ia(),new GT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:iI.bind(null,e),n_:lI.bind(null,e),ea:oI.bind(null,e),ta:aI.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await Ro(e)):(await e.ma.stop(),e.Pa.length>0&&(H(Jn,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new kl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(N.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ml(e,t){if(nn("AsyncQueue",`${t}: ${e}`),Ur(e))return new Q(N.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{static emptySet(t){return new Sr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=us(),this.sortedSet=new Dt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Sr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Sr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.fa=new Dt(X.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):tt(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Or{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Or(t,n,Sr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Eo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class hI{constructor(){this.queries=dh(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=st(n),i=s.queries;s.queries=dh(),i.forEach(((a,l)=>{for(const c of l.wa)c.onError(r)}))})(this,new Q(N.ABORTED,"Firestore shutting down"))}}function dh(){return new tr((e=>Sd(e)),Eo)}async function fI(e,t){const n=st(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new cI,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Ml(a,`Initialization of query '${mr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&Fl(n)}async function dI(e,t){const n=st(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.wa.indexOf(t);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pI(e,t){const n=st(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(r=!0);a.ya=s}}r&&Fl(n)}function mI(e,t,n){const r=st(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function Fl(e){e.Da.forEach((t=>{t.next()}))}var ja,ph;(ph=ja||(ja={})).Fa="default",ph.Cache="cache";class gI{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Or(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Or.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==ja.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t){this.key=t}}class lp{constructor(t){this.key=t}}class _I{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ct(),this.mutatedKeys=ct(),this.Xa=Rd(t),this.eu=new Sr(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new fh,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,m)=>{const v=s.get(d),b=To(this.query,m)?m:null,V=!!v&&this.mutatedKeys.has(v.key),F=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let L=!1;v&&b?v.data.isEqual(b.data)?V!==F&&(r.track({type:3,doc:b}),L=!0):this.iu(v,b)||(r.track({type:2,doc:b}),L=!0,(c&&this.Xa(b,c)>0||f&&this.Xa(b,f)<0)&&(l=!0)):!v&&b?(r.track({type:0,doc:b}),L=!0):v&&!b&&(r.track({type:1,doc:v}),L=!0,(c||f)&&(l=!0)),L&&(b?(a=a.add(b),i=F?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:a,ru:r,Ds:l,mutatedKeys:i}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort(((d,m)=>(function(b,V){const F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:L})}};return F(b)-F(V)})(d.type,m.type)||this.Xa(d.doc,m.doc))),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,f=c!==this.Ya;return this.Ya=c,a.length!==0||f?{snapshot:new Or(this.query,t.eu,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=ct(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return t.forEach((r=>{this.Za.has(r)||n.push(new lp(r))})),this.Za.forEach((r=>{t.has(r)||n.push(new ap(r))})),n}uu(t){this.Ha=t.qs,this.Za=ct();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Or.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ll="SyncEngine";class yI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class vI{constructor(t){this.key=t,this.lu=!1}}class EI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new tr((l=>Sd(l)),Eo),this.Tu=new Map,this.Iu=new Set,this.du=new Dt(X.comparator),this.Eu=new Map,this.Au=new Rl,this.Ru={},this.Vu=new Map,this.mu=Nr.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function TI(e,t,n=!0){const r=pp(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await up(r,t,n,!0),s}async function II(e,t){const n=pp(e);await up(n,t,!0,!1)}async function up(e,t,n,r){const s=await UT(e.localStore,Fe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await wI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&ep(e.remoteStore,s),l}async function wI(e,t,n,r,s){e.gu=(m,v,b)=>(async function(F,L,K,W){let G=L.view.nu(K);G.Ds&&(G=await oh(F.localStore,L.query,!1).then((({documents:I})=>L.view.nu(I,G))));const z=W&&W.targetChanges.get(L.targetId),lt=W&&W.targetMismatches.get(L.targetId)!=null,vt=L.view.applyChanges(G,F.isPrimaryClient,z,lt);return gh(F,L.targetId,vt._u),vt.snapshot})(e,m,v,b);const i=await oh(e.localStore,t,!0),a=new _I(t,i.qs),l=a.nu(i.documents),c=zs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);gh(e,n,f._u);const d=new yI(t,n,a);return e.Pu.set(t,d),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),f.snapshot}async function AI(e,t,n){const r=st(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter((a=>!Eo(a,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ua(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Dl(r.remoteStore,s.targetId),$a(r,s.targetId)})).catch(Lr)):($a(r,s.targetId),await Ua(r.localStore,s.targetId,!0))}async function bI(e,t){const n=st(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dl(n.remoteStore,r.targetId))}async function SI(e,t,n){const r=NI(e);try{const s=await(function(a,l){const c=st(a),f=Ct.now(),d=l.reduce(((b,V)=>b.add(V.key)),ct());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let V=rn(),F=ct();return c.Os.getEntries(b,d).next((L=>{V=L,V.forEach(((K,W)=>{W.isValidDocument()||(F=F.add(K))}))})).next((()=>c.localDocuments.getOverlayedDocuments(b,V))).next((L=>{m=L;const K=[];for(const W of l){const G=UE(W,m.get(W.key).overlayedDocument);G!=null&&K.push(new er(W.key,G,vd(G.value.mapValue),Ye.exists(!0)))}return c.mutationQueue.addMutationBatch(b,f,K,l)})).next((L=>{v=L;const K=L.applyToLocalDocumentSet(m,F);return c.documentOverlayCache.saveOverlays(b,L.batchId,K)}))})).then((()=>({batchId:v.batchId,changes:Pd(m)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,c){let f=a.Ru[a.currentUser.toKey()];f||(f=new Dt(ut)),f=f.insert(l,c),a.Ru[a.currentUser.toKey()]=f})(r,s.batchId,n),await Ws(r,s.changes),await Ro(r.remoteStore)}catch(s){const i=Ml(s,"Failed to persist write");n.reject(i)}}async function cp(e,t){const n=st(e);try{const r=await MT(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Eu.get(i);a&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?yt(a.lu,14607):s.removedDocuments.size>0&&(yt(a.lu,42227),a.lu=!1))})),await Ws(n,r,t)}catch(r){await Lr(r)}}function mh(e,t,n){const r=st(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const c=st(a);c.onlineState=l;let f=!1;c.queries.forEach(((d,m)=>{for(const v of m.wa)v.va(l)&&(f=!0)})),f&&Fl(c)})(r.eventManager,t),s.length&&r.hu.J_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function RI(e,t,n){const r=st(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new Dt(X.comparator);a=a.insert(i,le.newNoDocument(i,rt.min()));const l=ct().add(i),c=new Ao(rt.min(),new Map,new Dt(ut),a,l);await cp(r,c),r.du=r.du.remove(i),r.Eu.delete(t),Ul(r)}else await Ua(r.localStore,t,!1).then((()=>$a(r,t,n))).catch(Lr)}async function CI(e,t){const n=st(e),r=t.batch.batchId;try{const s=await kT(n.localStore,t);fp(n,r,null),hp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ws(n,s)}catch(s){await Lr(s)}}async function PI(e,t,n){const r=st(e);try{const s=await(function(a,l){const c=st(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return c.mutationQueue.lookupMutationBatch(f,l).next((m=>(yt(m!==null,37113),d=m.keys(),c.mutationQueue.removeMutationBatch(f,m)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>c.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);fp(r,t,n),hp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ws(r,s)}catch(s){await Lr(s)}}function hp(e,t){(e.Vu.get(t)||[]).forEach((n=>{n.resolve()})),e.Vu.delete(t)}function fp(e,t,n){const r=st(e);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function $a(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((r=>{e.Au.containsKey(r)||dp(e,r)}))}function dp(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Dl(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Ul(e))}function gh(e,t,n){for(const r of n)r instanceof ap?(e.Au.addReference(r.key,t),VI(e,r)):r instanceof lp?(H(Ll,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||dp(e,r.key)):tt(19791,{yu:r})}function VI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(H(Ll,"New document in limbo: "+n),e.Iu.add(r),Ul(e))}function Ul(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new X(Rt.fromString(t)),r=e.mu.next();e.Eu.set(r,new vI(n)),e.du=e.du.insert(n,r),ep(e.remoteStore,new pn(Fe(Il(n.path)),r,"TargetPurposeLimboResolution",go.ue))}}async function Ws(e,t,n){const r=st(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach(((l,c)=>{a.push(r.gu(c,t,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Pl.Es(c.targetId,f);i.push(m)}})))})),await Promise.all(a),r.hu.J_(s),await(async function(c,f){const d=st(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>D.forEach(f,(v=>D.forEach(v.Is,(b=>d.persistence.referenceDelegate.addReference(m,v.targetId,b))).next((()=>D.forEach(v.ds,(b=>d.persistence.referenceDelegate.removeReference(m,v.targetId,b)))))))))}catch(m){if(!Ur(m))throw m;H(Vl,"Failed to update sequence numbers: "+m)}for(const m of f){const v=m.targetId;if(!m.fromCache){const b=d.Fs.get(v),V=b.snapshotVersion,F=b.withLastLimboFreeSnapshotVersion(V);d.Fs=d.Fs.insert(v,F)}}})(r.localStore,i))}async function DI(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H(Ll,"User change. New user:",t.toKey());const r=await Xd(n.localStore,t);n.currentUser=t,(function(i,a){i.Vu.forEach((l=>{l.forEach((c=>{c.reject(new Q(N.CANCELLED,a))}))})),i.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ws(n,r.Bs)}}function xI(e,t){const n=st(e),r=n.Eu.get(t);if(r&&r.lu)return ct().add(r.key);{let s=ct();const i=n.Tu.get(t);if(!i)return s;for(const a of i){const l=n.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function pp(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RI.bind(null,t),t.hu.J_=pI.bind(null,t.eventManager),t.hu.pu=mI.bind(null,t.eventManager),t}function NI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=PI.bind(null,t),t}class eo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=bo(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return OT(this.persistence,new DT,t.initialUser,this.serializer)}Du(t){return new Jd(Cl.Vi,this.serializer)}bu(t){return new jT}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eo.provider={build:()=>new eo};class OI extends eo{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){yt(this.persistence.referenceDelegate instanceof Zi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gT(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?ge.withCacheSize(this.cacheSizeBytes):ge.DEFAULT;return new Jd((r=>Zi.Vi(r,n)),this.serializer)}}class qa{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DI.bind(null,this.syncEngine),await uI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new hI})()}createDatastore(t){const n=bo(t.databaseInfo.databaseId),r=(function(i){return new KT(i)})(t.databaseInfo);return(function(i,a,l,c){return new JT(i,a,l,c)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new YT(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>mh(this.syncEngine,n,0)),(function(){return uh.C()?new uh:new $T})())}createSyncEngine(t,n){return(function(s,i,a,l,c,f,d){const m=new EI(s,i,a,l,c,f);return d&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(s){const i=st(s);H(Jn,"RemoteStore shutting down."),i.Ia.add(5),await Ks(i),i.Ea.shutdown(),i.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}qa.provider={build:()=>new qa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):nn("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="FirestoreClient";class MI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=oe.UNAUTHENTICATED,this.clientId=ml.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(Pn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(Pn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ml(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function ca(e,t){e.asyncQueue.verifyOperationInProgress(),H(Pn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Xd(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>{wn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then((()=>{H("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{wn("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),e._offlineComponents=t}async function _h(e,t){e.asyncQueue.verifyOperationInProgress();const n=await FI(e);H(Pn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>hh(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>hh(t.remoteStore,s))),e._onlineComponents=t}async function FI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Pn,"Using user provided OfflineComponentProvider");try{await ca(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===N.FAILED_PRECONDITION||s.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;wn("Error using user provided cache. Falling back to memory cache: "+n),await ca(e,new eo)}}else H(Pn,"Using default OfflineComponentProvider"),await ca(e,new OI(void 0));return e._offlineComponents}async function mp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Pn,"Using user provided OnlineComponentProvider"),await _h(e,e._uninitializedComponentsProvider._online)):(H(Pn,"Using default OnlineComponentProvider"),await _h(e,new qa))),e._onlineComponents}function LI(e){return mp(e).then((t=>t.syncEngine))}async function yh(e){const t=await mp(e),n=t.eventManager;return n.onListen=TI.bind(null,t.syncEngine),n.onUnlisten=AI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=II.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=bI.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="firestore.googleapis.com",Eh=!0;class Th{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Q(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_p,this.ssl=Eh}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Eh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Qd;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<pT)throw new Q(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Yv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gp((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Co{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Th({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Q(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Th(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qv;switch(r.type){case"firstParty":return new Wv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=vh.get(n);r&&(H("ComponentProvider","Removing Datastore"),vh.delete(n),r.terminate())})(this),Promise.resolve()}}function UI(e,t,n,r={}){var s;e=br(e,Co);const i=fl(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(yy(`https://${c}`),Iy("Firestore",!0)),a.host!==_p&&a.host!==c&&wn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!$i(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=oe.MOCK_USER;else{d=vy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Q(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new oe(v)}e._authCredentials=new Hv(new od(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Po(this.firestore,t,this._query)}}class qt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new En(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qt(this.firestore,t,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(qs(n,qt._jsonSchema))return new qt(t,r||null,new X(Rt.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Lt("string",qt._jsonSchemaVersion),referencePath:Lt("string")};class En extends Po{constructor(t,n,r){super(t,n,Il(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qt(this.firestore,null,new X(t))}withConverter(t){return new En(this.firestore,t,this._path)}}function is(e,t,...n){if(e=Pr(e),ld("collection","path",t),e instanceof Co){const r=Rt.fromString(t,...n);return Oc(r),new En(e,null,r)}{if(!(e instanceof qt||e instanceof En))throw new Q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Oc(r),new En(e.firestore,null,r)}}function BI(e,t,...n){if(e=Pr(e),arguments.length===1&&(t=ml.newId()),ld("doc","path",t),e instanceof Co){const r=Rt.fromString(t,...n);return Nc(r),new qt(e,null,new X(r))}{if(!(e instanceof qt||e instanceof En))throw new Q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Nc(r),new qt(e.firestore,e instanceof En?e.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="AsyncQueue";class wh{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Zd(this,"async_queue_retry"),this.oc=()=>{const r=ua();r&&H(Ih,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=ua();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=ua();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Kn;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Ur(t))throw t;H(Ih,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((r=>{throw this.tc=r,this.nc=!1,nn("INTERNAL UNHANDLED ERROR: ",Ah(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const s=kl.createAndSchedule(this,t,n,r,(i=>this.lc(i)));return this.ec.push(s),s}ac(){this.tc&&tt(47125,{hc:Ah(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function Ah(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(e,["next","error","complete"])}class no extends Co{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new wh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new wh(t),this._firestoreClient=void 0,await t}}}function jI(e,t){const n=typeof e=="object"?e:xv(),r=typeof e=="string"?e:Ki,s=Rv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gy("firestore");i&&UI(s,...i)}return s}function yp(e){if(e._terminated)throw new Q(N.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||$I(e),e._firestoreClient}function $I(e){var t,n,r;const s=e._freezeSettings(),i=(function(l,c,f,d){return new uE(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gp(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new MI(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this._byteString=t}static fromBase64String(t){try{return new we(te.fromBase64String(t))}catch(n){throw new Q(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new we(te.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:we._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(qs(t,we._jsonSchema))return we.fromBase64String(t.bytes)}}we._jsonSchemaVersion="firestore/bytes/1.0",we._jsonSchema={type:Lt("string",we._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Q(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Q(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Q(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ue._jsonSchemaVersion}}static fromJSON(t){if(qs(t,Ue._jsonSchema))return new Ue(t.latitude,t.longitude)}}Ue._jsonSchemaVersion="firestore/geoPoint/1.0",Ue._jsonSchema={type:Lt("string",Ue._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Be._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(qs(t,Be._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Be(t.vectorValues);throw new Q(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Be._jsonSchemaVersion="firestore/vectorValue/1.0",Be._jsonSchema={type:Lt("string",Be._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=/^__.*__$/;class HI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new er(t,this.data,this.fieldMask,n,this.fieldTransforms):new Hs(t,this.data,n,this.fieldTransforms)}}function Ep(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:e})}}class jl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new jl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.fc(t),s}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return ro(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(Ep(this.Ec)&&qI.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class zI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||bo(t)}Dc(t,n,r,s=!1){return new jl({Ec:t,methodName:n,bc:r,path:Zt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KI(e){const t=e._freezeSettings(),n=bo(e._databaseId);return new zI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function WI(e,t,n,r,s,i={}){const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Ap("Data must be an object, but it was:",a,r);const l=Ip(r,a);let c,f;if(i.merge)c=new Re(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const v=GI(t,m,n);if(!a.contains(v))throw new Q(N.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);JI(d,v)||d.push(v)}c=new Re(d),f=a.fieldTransforms.filter((m=>c.covers(m.field)))}else c=null,f=a.fieldTransforms;return new HI(new Ie(l),c,f)}function Tp(e,t){if(wp(e=Pr(e)))return Ap("Unsupported field value:",t,e),Ip(e,t);if(e instanceof vp)return(function(r,s){if(!Ep(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let c=Tp(l,s.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=Pr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ct.fromDate(r);return{timestampValue:Yi(s.serializer,i)}}if(r instanceof Ct){const i=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yi(s.serializer,i)}}if(r instanceof Ue)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof we)return{bytesValue:$d(s.serializer,r._byteString)};if(r instanceof qt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Be)return(function(a,l){return{mapValue:{fields:{[_d]:{stringValue:yd},[Wi]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return wl(l.serializer,f)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${gl(r)}`)})(e,t)}function Ip(e,t){const n={};return hd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zn(e,((r,s)=>{const i=Tp(s,t.Vc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function wp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ct||e instanceof Ue||e instanceof we||e instanceof qt||e instanceof vp||e instanceof Be)}function Ap(e,t,n){if(!wp(n)||!ud(n)){const r=gl(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function GI(e,t,n){if((t=Pr(t))instanceof Bl)return t._internalPath;if(typeof t=="string")return bp(e,t);throw ro("Field path arguments must be of type string or ",e,!1,void 0,n)}const QI=new RegExp("[~\\*/\\[\\]]");function bp(e,t,n){if(t.search(QI)>=0)throw ro(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Bl(...t.split("."))._internalPath}catch{throw ro(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ro(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Q(N.INVALID_ARGUMENT,l+e+c)}function JI(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new XI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Rp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XI extends Sp{data(){return super.data()}}function Rp(e,t){return typeof t=="string"?bp(e,t):t instanceof Bl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Q(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZI{convertValue(t,n="none"){switch(Rn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Sn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Zn(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Wi].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((a=>Ot(a.doubleValue)));return new Be(i)}convertGeoPoint(t){return new Ue(Ot(t.latitude),Ot(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=yo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Os(t));default:return null}}convertTimestamp(t){const n=bn(t);return new Ct(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Rt.fromString(t);yt(Gd(r),9688,{name:t});const s=new ks(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||nn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class hs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Wn extends Sp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Vi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Rp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Wn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wn._jsonSchema={type:Lt("string",Wn._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Vi extends Wn{data(t={}){return super.data(t)}}class Rr{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new hs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Vi(this._firestore,this._userDataWriter,r.key,r,new hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const c=new Vi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new Vi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:ew(l.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Rr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ml.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ew(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}Rr._jsonSchemaVersion="firestore/querySnapshot/1.0",Rr._jsonSchema={type:Lt("string",Rr._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Cp extends ZI{constructor(t){super(),this.firestore=t}convertBytes(t){return new we(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function nw(e,t,n){e=br(e,qt);const r=br(e.firestore,no),s=tw(e.converter,t);return rw(r,[WI(KI(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Ye.none())])}function vi(e,...t){var n,r,s;e=Pr(e);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||bh(t[a])||(i=t[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(bh(t[a])){const m=t[a];t[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),t[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),t[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,f,d;if(e instanceof qt)f=br(e.firestore,no),d=Il(e._key.path),c={next:m=>{t[a]&&t[a](sw(f,e,m))},error:t[a+1],complete:t[a+2]};else{const m=br(e,Po);f=br(m.firestore,no),d=m._query;const v=new Cp(f);c={next:b=>{t[a]&&t[a](new Rr(f,v,m,b))},error:t[a+1],complete:t[a+2]},YI(e._query)}return(function(v,b,V,F){const L=new kI(F),K=new gI(b,L,V);return v.asyncQueue.enqueueAndForget((async()=>fI(await yh(v),K))),()=>{L.Ou(),v.asyncQueue.enqueueAndForget((async()=>dI(await yh(v),K)))}})(yp(f),d,l,c)}function rw(e,t){return(function(r,s){const i=new Kn;return r.asyncQueue.enqueueAndForget((async()=>SI(await LI(r),s,i))),i.promise})(yp(e),t)}function sw(e,t,n){const r=n.docs.get(t._key),s=new Cp(e);return new Wn(e,s,t._key,r,new hs(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){Fr=s})(Dv),Hi(new Ds("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new no(new zv(r.getProvider("auth-internal")),new Gv(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Q(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(f.options.projectId,d)})(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Ar(Cc,Pc,t),Ar(Cc,Pc,"esm2017")})();var iw="firebase",ow="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(iw,ow,"app");const aw={apiKey:"AIzaSyAiu9JFruHnV4nNSdutMmM1DzjvtWukxXo",authDomain:"cis371-ee861.firebaseapp.com",projectId:"cis371-ee861",storageBucket:"cis371-ee861.firebasestorage.app",messagingSenderId:"628607970460",appId:"1:628607970460:web:455403ef741bba35d49159",measurementId:"G-2G0CDQP4J8"},lw=Jf(aw),os=jI(lw),Pp=D_("BeverageStore",{state:()=>({temps:mc,currentTemp:mc[0],bases:[],currentBase:null,syrups:[],currentSyrup:null,creamers:[],currentCreamer:null,beverages:[],currentBeverage:null,currentName:""}),actions:{init(){vi(is(os,"bases"),e=>{this.bases=e.docs.map(t=>({id:t.id,...t.data()})),!this.currentBase&&this.bases.length>0&&(this.currentBase=this.bases[0])}),vi(is(os,"creamers"),e=>{this.creamers=e.docs.map(t=>({id:t.id,...t.data()})),!this.currentCreamer&&this.creamers.length>0&&(this.currentCreamer=this.creamers[0])}),vi(is(os,"syrups"),e=>{this.syrups=e.docs.map(t=>({id:t.id,...t.data()})),!this.currentSyrup&&this.syrups.length>0&&(this.currentSyrup=this.syrups[0])}),vi(is(os,"beverages"),e=>{this.beverages=e.docs.map(t=>({id:t.id,...t.data()})),!this.currentBeverage&&this.beverages.length>0&&(this.currentBeverage=this.beverages[0])})},async makeBeverage(){if(this.currentName.trim()===""||!this.currentBase||!this.currentCreamer||!this.currentSyrup)return;const e=BI(is(os,"beverages")),t={id:e.id,name:this.currentName,temp:this.currentTemp,base:this.currentBase,syrup:this.currentSyrup,creamer:this.currentCreamer};await nw(e,t)},showBeverage(e){this.currentName=e.name,this.currentTemp=e.temp,this.currentBase=e.base,this.currentSyrup=e.syrup,this.currentCreamer=e.creamer}}}),uw=js({__name:"Beverage",props:{isIced:{type:Boolean}},setup(e){const t=Pp(),n=yr(()=>{var a;return((a=t.currentCreamer)==null?void 0:a.color)==="transparent"}),r=yr(()=>{var a;return((a=t.currentSyrup)==null?void 0:a.color)==="transparent"}),s=yr(()=>!r.value),i=yr(()=>!n.value);return(a,l)=>(At(),vs(H_,null,{default:Bn(()=>[e.isIced?(At(),vs(iy,{key:0})):(At(),vs(ty,{key:1})),Xt(B_,null,ag({_:2},[n.value&&r.value?{name:"bottom",fn:Bn(()=>{var c;return[Xt(na,{color:((c=Tt(t).currentBase)==null?void 0:c.color)||"#8B4513"},null,8,["color"])]}),key:"0"}:r.value&&i.value?{name:"bottom",fn:Bn(()=>{var c,f;return[Xt(pc,{color:(c=Tt(t).currentCreamer)==null?void 0:c.color},null,8,["color"]),Xt(na,{color:((f=Tt(t).currentBase)==null?void 0:f.color)||"#8B4513"},null,8,["color"])]}),key:"1"}:void 0,s.value&&i.value?{name:"top",fn:Bn(()=>{var c;return[Xt(pc,{color:(c=Tt(t).currentCreamer)==null?void 0:c.color},null,8,["color"])]}),key:"2"}:void 0,s.value?{name:"mid",fn:Bn(()=>{var c;return[Xt(K_,{color:((c=Tt(t).currentSyrup)==null?void 0:c.color)||"#FFEFD5"},null,8,["color"])]}),key:"3"}:void 0,s.value?{name:"bottom",fn:Bn(()=>{var c;return[Xt(na,{color:((c=Tt(t).currentBase)==null?void 0:c.color)||"#8B4513"},null,8,["color"])]}),key:"4"}:void 0]),1024)]),_:1}))}}),cw=["id","value"],hw=["id","value"],fw=["id","value"],dw=["id","value"],pw={id:"beverage-container",style:{"margin-top":"20px"}},mw=["value","onChange"],gw=js({__name:"App",setup(e){const t=Pp();return t.init(),(n,r)=>(At(),Nt(kt,null,[Pt("div",null,[Xt(uw,{isIced:Tt(t).currentTemp==="Cold"},null,8,["isIced"]),Pt("ul",null,[Pt("li",null,[(At(!0),Nt(kt,null,dn(Tt(t).temps,s=>(At(),Nt("label",{key:s},[ur(Pt("input",{type:"radio",name:"temperature",id:`r${s}`,value:s,"onUpdate:modelValue":r[0]||(r[0]=i=>Tt(t).currentTemp=i)},null,8,cw),[[ss,Tt(t).currentTemp]]),dr(" "+hr(s),1)]))),128))])]),Pt("ul",null,[Pt("li",null,[(At(!0),Nt(kt,null,dn(Tt(t).bases,s=>(At(),Nt("label",{key:s.id},[ur(Pt("input",{type:"radio",name:"bases",id:`r${s.id}`,value:s,"onUpdate:modelValue":r[1]||(r[1]=i=>Tt(t).currentBase=i)},null,8,hw),[[ss,Tt(t).currentBase]]),dr(" "+hr(s.name),1)]))),128))])]),Pt("ul",null,[Pt("li",null,[(At(!0),Nt(kt,null,dn(Tt(t).syrups,s=>(At(),Nt("label",{key:s.id},[ur(Pt("input",{type:"radio",name:"syrups",id:`r${s.id}`,value:s,"onUpdate:modelValue":r[2]||(r[2]=i=>Tt(t).currentSyrup=i)},null,8,fw),[[ss,Tt(t).currentSyrup]]),dr(" "+hr(s.name),1)]))),128))])]),Pt("ul",null,[Pt("li",null,[(At(!0),Nt(kt,null,dn(Tt(t).creamers,s=>(At(),Nt("label",{key:s.id},[ur(Pt("input",{type:"radio",name:"creamers",id:`r${s.id}`,value:s,"onUpdate:modelValue":r[3]||(r[3]=i=>Tt(t).currentCreamer=i)},null,8,dw),[[ss,Tt(t).currentCreamer]]),dr(" "+hr(s.name),1)]))),128))])]),ur(Pt("input",{type:"text",placeholder:"Beverage Name","onUpdate:modelValue":r[4]||(r[4]=s=>Tt(t).currentName=s)},null,512),[[y_,Tt(t).currentName]]),Pt("button",{onClick:r[5]||(r[5]=s=>Tt(t).makeBeverage())}," Make Beverage")]),Pt("div",pw,[Pt("ul",null,[Pt("li",null,[(At(!0),Nt(kt,null,dn(Tt(t).beverages,s=>(At(),Nt("label",{key:s.id},[ur(Pt("input",{type:"radio",value:s,"onUpdate:modelValue":r[6]||(r[6]=i=>Tt(t).currentBeverage=i),onChange:i=>Tt(t).showBeverage(s)},null,40,mw),[[ss,Tt(t).currentBeverage]]),dr(" "+hr(s.name),1)]))),128))])])])],64))}}),Vp=b_();Vp.use(M_);I_(gw).use(Vp).mount("#app");
